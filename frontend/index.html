<!DOCTYPE html>
<html lang="zh-CN" class="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>éšæœºå›¾ç‰‡API - å…¨åŠŸèƒ½å¹³å°</title>
    <!-- å¼•å…¥Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- å¼•å…¥Font Awesomeå›¾æ ‡ - å¤šCDNç«äº‰åŠ è½½ -->
    <script>
    (function() {
        var cdnList = [
            'https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css',
            'https://cdn.bootcdn.net/ajax/libs/font-awesome/6.5.1/css/all.min.css',
            'https://lib.baomitu.com/font-awesome/6.5.1/css/all.min.css'
        ];
        
        var loaded = false;
        var links = [];
        
        // åŒæ—¶åŠ è½½æ‰€æœ‰CDN
        cdnList.forEach(function(cdn) {
            var link = document.createElement('link');
            link.rel = 'stylesheet';
            link.href = cdn;
            
            link.onload = function() {
                if (!loaded) {  // ç¬¬ä¸€ä¸ªåŠ è½½æˆåŠŸçš„
                    loaded = true;
                    console.log('âœ… Font Awesome CDNåŠ è½½æˆåŠŸ:', cdn);
                    // ç§»é™¤å…¶ä»–æœªå®Œæˆçš„é“¾æ¥
                    links.forEach(function(l) {
                        if (l !== link && l.parentNode) {
                            l.parentNode.removeChild(l);
                        }
                    });
                }
            };
            
            links.push(link);
            document.head.appendChild(link);
        });
    })();
    </script>
    <!-- å¼•å…¥Chart.jsç”¨äºç»Ÿè®¡å±•ç¤º - å¤šCDNç«äº‰åŠ è½½ -->
    <script>
    (function() {
        var cdnList = [
            'https://cdn.jsdelivr.net/npm/chart.js@4.4.8/dist/chart.umd.min.js',
            'https://cdnjs.cloudflare.com/ajax/libs/Chart.js/4.4.8/chart.umd.min.js',
            'https://unpkg.com/chart.js@4.4.8/dist/chart.umd.min.js'
        ];
        
        var loaded = false;
        var scripts = [];
        
        // åŒæ—¶åŠ è½½æ‰€æœ‰CDN
        cdnList.forEach(function(cdn) {
            var script = document.createElement('script');
            script.src = cdn;
            
            script.onload = function() {
                if (!loaded) {  // ç¬¬ä¸€ä¸ªåŠ è½½æˆåŠŸçš„
                    loaded = true;
                    console.log('âœ… Chart.js CDNåŠ è½½æˆåŠŸ:', cdn);
                    // ç§»é™¤å…¶ä»–æœªå®Œæˆçš„è„šæœ¬
                    scripts.forEach(function(s) {
                        if (s !== script && s.parentNode) {
                            s.parentNode.removeChild(s);
                        }
                    });
                }
            };
            
            scripts.push(script);
            document.head.appendChild(script);
        });
    })();
    </script>
    <!-- å…¨å±€æ ·å¼ -->
    <style>
        /* æ¸å˜æŒ‰é’® - å…‰æ˜æ¨¡å¼ */
        .btn-gradient.light {
            background: linear-gradient(135deg, #4f46e5 0%, #6366f1 100%);
        }
        
        /* æ¸å˜æŒ‰é’® - é»‘å¤œæ¨¡å¼ */
        .btn-gradient.dark {
            background: linear-gradient(135deg, #6366f1 0%, #818cf8 100%);
        }
        
        .btn-gradient {
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
        }
        
        .btn-gradient:hover {
            box-shadow: 0 12px 24px rgba(99, 102, 241, 0.3);
            transform: translateY(-2px);
        }
        
        .btn-gradient.dark:hover {
            box-shadow: 0 12px 24px rgba(129, 140, 248, 0.4);
        }
        
        .btn-gradient:active {
            transform: translateY(0);
        }
    </style>
    
    <!-- å¼•å…¥i18nextç”¨äºå¤šè¯­è¨€ - å¤šCDNç«äº‰åŠ è½½ -->
    <script>
    (function() {
        var cdnList = [
            'https://cdn.jsdelivr.net/npm/i18next@23.7.6/dist/umd/i18next.min.js',
            'https://cdnjs.cloudflare.com/ajax/libs/i18next/23.7.6/i18next.min.js',
            'https://unpkg.com/i18next@23.7.6/dist/umd/i18next.min.js'
        ];
        
        var loaded = false;
        var scripts = [];
        
        // åŒæ—¶åŠ è½½æ‰€æœ‰CDN
        cdnList.forEach(function(cdn) {
            var script = document.createElement('script');
            script.src = cdn;
            
            script.onload = function() {
                if (!loaded) {  // ç¬¬ä¸€ä¸ªåŠ è½½æˆåŠŸçš„
                    loaded = true;
                    console.log('âœ… i18next CDNåŠ è½½æˆåŠŸ:', cdn);
                    // ç§»é™¤å…¶ä»–æœªå®Œæˆçš„è„šæœ¬
                    scripts.forEach(function(s) {
                        if (s !== script && s.parentNode) {
                            s.parentNode.removeChild(s);
                        }
                    });
                }
            };
            
            scripts.push(script);
            document.head.appendChild(script);
        });
    })();
    </script>
    <script>
    (function() {
        var cdnList = [
            'https://cdn.jsdelivr.net/npm/i18next-browser-languagedetector@7.2.0/dist/umd/i18nextBrowserLanguageDetector.min.js',
            'https://cdnjs.cloudflare.com/ajax/libs/i18next-browser-languagedetector/7.2.0/i18nextBrowserLanguageDetector.min.js',
            'https://unpkg.com/i18next-browser-languagedetector@7.2.0/dist/umd/i18nextBrowserLanguageDetector.min.js'
        ];
        
        var loaded = false;
        var scripts = [];
        
        // åŒæ—¶åŠ è½½æ‰€æœ‰CDN
        cdnList.forEach(function(cdn) {
            var script = document.createElement('script');
            script.src = cdn;
            
            script.onload = function() {
                if (!loaded) {  // ç¬¬ä¸€ä¸ªåŠ è½½æˆåŠŸçš„
                    loaded = true;
                    console.log('âœ… i18next Browser Language Detector CDNåŠ è½½æˆåŠŸ:', cdn);
                    // ç§»é™¤å…¶ä»–æœªå®Œæˆçš„è„šæœ¬
                    scripts.forEach(function(s) {
                        if (s !== script && s.parentNode) {
                            s.parentNode.removeChild(s);
                        }
                    });
                }
            };
            
            scripts.push(script);
            document.head.appendChild(script);
        });
    })();
    </script>

    <!-- è‡ªå®šä¹‰Tailwindé…ç½® -->
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        primary: '#6366f1', // é›è“è‰²ä¸»è°ƒ
                        secondary: '#10b981', // ç¿ ç»¿è‰²è¾…åŠ©è‰²
                        accent: '#f59e0b', // ç¥ç€è‰²å¼ºè°ƒè‰²
                        dark: {
                            100: '#1f2937',
                            200: '#111827',
                            300: '#030712'
                        },
                        light: {
                            100: '#f9fafb',
                            200: '#f3f4f6',
                            300: '#e5e7eb'
                        },
                        muted: {
                            dark: '#6b7280',
                            light: '#9ca3af'
                        }
                    },
                    fontFamily: {
                        inter: ['Inter', 'SF Pro Display', 'system-ui', 'sans-serif'],
                    },
                    boxShadow: {
                        'glow': '0 0 20px rgba(99, 102, 241, 0.4)',
                        'card': '0 8px 30px rgba(0, 0, 0, 0.12)',
                        'card-dark': '0 8px 30px rgba(0, 0, 0, 0.3)'
                    },
                    animation: {
                        'pulse-slow': 'pulse 3s cubic-bezier(0.4, 0, 0.6, 1) infinite',
                        'fade-in': 'fadeIn 0.5s ease-in-out',
                        'slide-up': 'slideUp 0.3s ease-out'
                    },
                    keyframes: {
                        fadeIn: {
                            '0%': { opacity: '0' },
                            '100%': { opacity: '1' }
                        },
                        slideUp: {
                            '0%': { transform: 'translateY(20px)', opacity: '0' },
                            '100%': { transform: 'translateY(0)', opacity: '1' }
                        }
                    },
                    screens: {
                        '2xl': '1664px'
                    }
                }
            }
        }
    </script>

    <style type="text/tailwindcss">
        @layer utilities {
            .content-auto {
                content-visibility: auto;
            }
            /* é€šç”¨å·¥å…·ç±» */
            .text-gradient {
                @apply bg-clip-text text-transparent bg-gradient-to-r from-primary to-secondary;
            }
            .bg-gradient-main {
                @apply bg-gradient-to-br from-primary/10 to-secondary/10 dark:from-primary/5 dark:to-secondary/5;
            }
            .bg-card {
                @apply bg-white dark:bg-dark-100 rounded-xl shadow-card dark:shadow-card-dark transition-all duration-300;
            }
            .btn-primary {
                @apply bg-primary text-white px-5 py-2.5 rounded-lg hover:bg-primary/90 active:bg-primary/80 transition-all duration-200 shadow-lg hover:shadow-glow focus:outline-none focus:ring-2 focus:ring-primary/50 disabled:opacity-50 disabled:cursor-not-allowed;
            }
            .btn-secondary {
                @apply bg-secondary text-white px-5 py-2.5 rounded-lg hover:bg-secondary/90 active:bg-secondary/80 transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-secondary/50 disabled:opacity-50 disabled:cursor-not-allowed;
            }
            .btn-outline {
                @apply border border-primary/50 text-primary dark:text-primary px-5 py-2.5 rounded-lg hover:bg-primary/10 active:bg-primary/20 transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-primary/30;
            }
            .btn-text {
                @apply text-muted-dark dark:text-muted-light hover:text-primary dark:hover:text-primary px-5 py-2.5 rounded-lg transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-primary/30;
            }
            .input-style {
                @apply bg-light-200 dark:bg-dark-200 border border-light-300 dark:border-dark-300 rounded-lg px-4 py-2.5 text-dark-200 dark:text-light-100 focus:border-primary focus:ring-2 focus:ring-primary/30 outline-none transition-all;
            }
            .badge {
                @apply px-2.5 py-0.5 rounded-full text-xs font-medium;
            }
            .badge-primary {
                @apply bg-primary/10 text-primary dark:bg-primary/20;
            }
            .badge-secondary {
                @apply bg-secondary/10 text-secondary dark:bg-secondary/20;
            }
            .badge-accent {
                @apply bg-accent/10 text-accent dark:bg-accent/20;
            }
            .badge-green {
                @apply bg-green-500/10 text-green-600 dark:bg-green-500/20 dark:text-green-400;
            }
            /* æ»šåŠ¨æ¡ç¾åŒ– */
            .custom-scrollbar::-webkit-scrollbar {
                width: 6px;
                height: 6px;
            }
            .custom-scrollbar::-webkit-scrollbar-track {
                @apply bg-light-200 dark:bg-dark-200 rounded-full;
            }
            .custom-scrollbar::-webkit-scrollbar-thumb {
                @apply bg-muted-light dark:bg-muted-dark rounded-full hover:bg-primary/50 transition-colors;
            }
            /* æ¨¡å—éšè—ç±» */
            .module-hidden {
                @apply hidden;
            }
        }
    </style>
    <!-- å¼•å…¥åˆ†ç±»ä¿¡æ¯åŠ¨æ€åŠ è½½æ¨¡å— -->
    <script src="/static/category-loader.js"></script>
</head>
<body class="min-h-screen flex flex-col bg-white dark:bg-dark-200 text-dark-200 dark:text-light-100 transition-colors duration-300">
    <!-- èƒŒæ™¯è£…é¥° -->
    <div class="fixed inset-0 bg-gradient-main -z-10"></div>

    <!-- æ·»åŠ å…¨å±€å˜é‡ -->
    <script>
        let changelogErrorFromButton = false;
    </script>
    
    <!-- é¡¶éƒ¨é€šçŸ¥æ  -->
    <div class="bg-accent/10 border-b border-accent/20 py-2 px-4 text-center text-sm text-accent">
        <div class="flex items-center justify-center">
            <i class="fa-solid fa-bell mr-2"></i>
            <div id="announcement-text" class="max-w-4xl overflow-hidden">
                <p>åŠ è½½ä¸­...</p>
            </div>
            <a href="javascript:void(0)" onclick="handleChangelogClick()" class="ml-3 underline hover:text-primary transition-colors shrink-0">æŸ¥çœ‹æ›´æ–°æ—¥å¿—</a>
        </div>
    </div>

    <!-- å¯¼èˆªæ  -->
    <header class="sticky top-0 z-50 bg-white/80 dark:bg-dark-100/80 backdrop-blur-md border-b border-light-300 dark:border-dark-200 transition-all duration-300">
        <div class="container mx-auto px-4 py-3 md:py-4 flex justify-between items-center">
            <!-- LogoåŒºåŸŸ -->
            <div class="flex items-center gap-3">
                <div class="w-10 h-10 rounded-full bg-gradient-to-r from-primary to-secondary flex items-center justify-center shadow-lg">
                    <i class="fa-solid fa-images text-white text-xl"></i>
                </div>
                <a href="/" class="text-xl md:text-2xl font-bold text-gradient no-underline hover:opacity-80 transition-opacity">éšæœºå›¾ç‰‡API</a>
            </div>

            <!-- æ¡Œé¢ç«¯å¯¼èˆª -->
            <nav class="hidden md:flex items-center gap-8">
                <a href="javascript:void(0)" onclick="showModule('hero')" class="text-muted-dark dark:text-muted-light hover:text-primary dark:hover:text-primary transition-colors relative after:absolute after:bottom-0 after:left-0 after:h-0.5 after:w-0 after:bg-primary after:transition-all hover:after:w-full">
                    <i class="fa-solid fa-home mr-1"></i>é¦–é¡µ
                </a>
                <a href="javascript:void(0)" onclick="showModule('demo')" class="text-muted-dark dark:text-muted-light hover:text-primary dark:hover:text-primary transition-colors relative after:absolute after:bottom-0 after:left-0 after:h-0.5 after:w-0 after:bg-primary after:transition-all hover:after:w-full">
                    <i class="fa-solid fa-rocket mr-1"></i>æ¼”ç¤º
                </a>
                <a href="javascript:void(0)" onclick="showModule('docs')" class="text-muted-dark dark:text-muted-light hover:text-primary dark:hover:text-primary transition-colors relative after:absolute after:bottom-0 after:left-0 after:h-0.5 after:w-0 after:bg-primary after:transition-all hover:after:w-full">
                    <i class="fa-solid fa-book mr-1"></i>æ–‡æ¡£
                </a>
                <a href="javascript:void(0)" onclick="showModule('categories')" class="text-muted-dark dark:text-muted-light hover:text-primary dark:hover:text-primary transition-colors relative after:absolute after:bottom-0 after:left-0 after:h-0.5 after:w-0 after:bg-primary after:transition-all hover:after:w-full">
                    <i class="fa-solid fa-th mr-1"></i>åˆ†ç±»
                </a>
                <a href="javascript:void(0)" onclick="showModule('stats')" class="text-muted-dark dark:text-muted-light hover:text-primary dark:hover:text-primary transition-colors relative after:absolute after:bottom-0 after:left-0 after:h-0.5 after:w-0 after:bg-primary after:transition-all hover:after:w-full">
                    <i class="fa-solid fa-chart-simple mr-1"></i>ç»Ÿè®¡
                </a>
                <a href="javascript:void(0)" onclick="showModule('feedback')" class="text-muted-dark dark:text-muted-light hover:text-primary dark:hover:text-primary transition-colors relative after:absolute after:bottom-0 after:left-0 after:h-0.5 after:w-0 after:bg-primary after:transition-all hover:after:w-full">
                    <i class="fa-solid fa-comment-dots mr-1"></i>åé¦ˆ
                </a>
            </nav>

            <!-- åŠŸèƒ½æŒ‰é’®åŒº -->
            <div class="flex items-center gap-4">
                <!-- ä¸»é¢˜åˆ‡æ¢ -->
                <button id="theme-toggle" class="w-9 h-9 rounded-full flex items-center justify-center text-muted-dark dark:text-muted-light hover:bg-light-200 dark:hover:bg-dark-200 transition-colors">
                    <i class="fa-solid fa-moon dark:hidden text-lg"></i>
                    <i class="fa-solid fa-sun hidden dark:block text-lg"></i>
                </button>

                <!-- è¯­è¨€åˆ‡æ¢ -->
                <div class="relative">
                    <button id="lang-toggle" class="w-9 h-9 rounded-full flex items-center justify-center text-muted-dark dark:text-muted-light hover:bg-light-200 dark:hover:bg-dark-200 transition-colors">
                        <i class="fa-solid fa-globe text-lg"></i>
                    </button>
                    <div id="lang-dropdown" class="absolute right-0 mt-2 w-36 bg-white dark:bg-dark-100 rounded-lg shadow-lg border border-light-300 dark:border-dark-200 hidden z-10 animate-fade-in">
                        <ul class="py-1">
                            <li><button class="lang-option w-full text-left px-4 py-2 text-sm hover:bg-light-200 dark:hover:bg-dark-200 transition-colors" data-lang="zh-CN">ğŸ‡¨ğŸ‡³ ç®€ä½“ä¸­æ–‡</button></li>
                            <li><button class="lang-option w-full text-left px-4 py-2 text-sm hover:bg-light-200 dark:hover:bg-dark-200 transition-colors" data-lang="en-US">ğŸ‡ºğŸ‡¸ English</button></li>
                            <li><button class="lang-option w-full text-left px-4 py-2 text-sm hover:bg-light-200 dark:hover:bg-dark-200 transition-colors" data-lang="ja-JP">ğŸ‡¯ğŸ‡µ æ—¥æœ¬èª</button></li>
                        </ul>
                    </div>
                </div>

                <!-- ç™»å½•/æ³¨å†ŒæŒ‰é’® -->
                <a id="auth-btn" href="/login" class="hidden md:flex items-center gap-2 px-4 py-2 rounded-full bg-gradient-to-r from-primary to-secondary text-white text-sm font-medium hover:shadow-lg hover:scale-105 transition-all">
                    <i class="fa-solid fa-user"></i>
                    <span id="auth-text">ç™»å½•</span>
                </a>

                <!-- ç§»åŠ¨ç«¯èœå•æŒ‰é’® -->
                <button id="mobile-menu-btn" class="md:hidden w-9 h-9 rounded-full flex items-center justify-center text-muted-dark dark:text-muted-light hover:bg-light-200 dark:hover:bg-dark-200 transition-colors">
                    <i class="fa-solid fa-bars text-lg"></i>
                </button>
            </div>
        </div>

        <!-- ç§»åŠ¨ç«¯å¯¼èˆªèœå• -->
        <div id="mobile-menu" class="md:hidden hidden bg-white dark:bg-dark-100 border-b border-light-300 dark:border-dark-200 animate-slide-up">
            <div class="container mx-auto px-4 py-3 flex flex-col gap-3">
                <a href="javascript:void(0)" onclick="showModule('hero')" class="py-2 px-3 rounded-lg hover:bg-light-200 dark:hover:bg-dark-200 transition-colors">
                    <i class="fa-solid fa-home mr-2"></i>é¦–é¡µ
                </a>
                <a href="javascript:void(0)" onclick="showModule('demo')" class="py-2 px-3 rounded-lg hover:bg-light-200 dark:hover:bg-dark-200 transition-colors">
                    <i class="fa-solid fa-rocket mr-2"></i>æ¼”ç¤º
                </a>
                <a href="javascript:void(0)" onclick="showModule('docs')" class="py-2 px-3 rounded-lg hover:bg-light-200 dark:hover:bg-dark-200 transition-colors">
                    <i class="fa-solid fa-book mr-2"></i>æ–‡æ¡£
                </a>
                <a href="javascript:void(0)" onclick="showModule('categories')" class="py-2 px-3 rounded-lg hover:bg-light-200 dark:hover:bg-dark-200 transition-colors">
                    <i class="fa-solid fa-th mr-2"></i>åˆ†ç±»
                </a>
                <a href="javascript:void(0)" onclick="showModule('stats')" class="py-2 px-3 rounded-lg hover:bg-light-200 dark:hover:bg-dark-200 transition-colors">
                    <i class="fa-solid fa-chart-simple mr-2"></i>ç»Ÿè®¡
                </a>
                <a href="javascript:void(0)" onclick="showModule('feedback')" class="py-2 px-3 rounded-lg hover:bg-light-200 dark:hover:bg-dark-200 transition-colors">
                    <i class="fa-solid fa-comment-dots mr-2"></i>åé¦ˆ
                </a>
                <div class="border-t border-light-200 dark:border-dark-200 my-2"></div>
                <a id="mobile-auth-btn" href="/login" class="py-2 px-3 rounded-lg hover:bg-light-200 dark:hover:bg-dark-200 transition-colors text-primary font-medium">
                    <i class="fa-solid fa-user mr-2"></i>
                    <span id="mobile-auth-text">ç™»å½•/æ³¨å†Œ</span>
                </a>
            </div>
        </div>
    </header>

    <!-- ä¸»å†…å®¹åŒº -->
    <main class="flex-grow flex flex-col container mx-auto px-4 py-8 md:py-12">
        <!-- è‹±é›„åŒº - é»˜è®¤æ˜¾ç¤º -->
        <section id="hero" class="text-center mb-2 md:mb-4 animate-fade-in">
            <div class="inline-block mb-6 px-4 py-1 badge badge-primary">
                <i class="fa-solid fa-star mr-1"></i> ç¨³å®šè¿è¡Œ 2000+ å¤©
            </div>
            <h2 class="text-[clamp(2.5rem,8vw,4rem)] font-bold mb-6 text-gradient leading-tight">
                éšæœºå›¾ç‰‡ç›´é“¾API<br class="md:hidden">
                <span class="text-dark-200 dark:text-light-100">æç®€æ¥å…¥ Â· æ¯«ç§’å“åº”</span>
            </h2>
            <p class="text-muted-dark dark:text-muted-light text-lg md:text-xl max-w-3xl mx-auto mb-10 leading-relaxed">
                æä¾›é«˜è´¨é‡ã€å¤šåˆ†ç±»ã€å¤šæ ¼å¼çš„éšæœºå›¾ç‰‡ç›´é“¾æœåŠ¡ï¼Œæ— éœ€è§£æJSONï¼Œä¸€è¡Œä»£ç å³å¯é›†æˆåˆ°ä½ çš„åº”ç”¨ã€ç½‘ç«™æˆ–å°ç¨‹åºä¸­
            </p>
            <div class="flex flex-wrap justify-center gap-5 mb-12">
                <a href="javascript:void(0)" onclick="showModule('demo')" class="btn-primary text-lg">
                    <i class="fa-solid fa-play-circle mr-2"></i>ç«‹å³ä½“éªŒ
                </a>
                <a href="javascript:void(0)" onclick="showModule('docs'); switchToBasicTab();" class="btn-outline text-lg">
                    <i class="fa-solid fa-code mr-2"></i>å¼€å‘æ–‡æ¡£
                </a>
            </div>

            <!-- ç‰¹æ€§å±•ç¤º -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 max-w-5xl mx-auto">
                <div class="bg-card p-6 hover:translate-y-[-5px] transition-transform">
                    <div class="w-12 h-12 rounded-lg bg-primary/10 dark:bg-primary/20 flex items-center justify-center mb-4">
                        <i class="fa-solid fa-bolt text-primary text-xl"></i>
                    </div>
                    <h3 class="text-xl font-semibold mb-2 text-dark-200 dark:text-light-100">æé€Ÿå“åº”</h3>
                    <p class="text-muted-dark dark:text-muted-light">å¹³å‡å“åº”æ—¶é—´ < 100msï¼ŒCDNåŠ é€Ÿåˆ†å‘ï¼Œå…¨çƒå¿«é€Ÿè®¿é—®</p>
                </div>
                <div class="bg-card p-6 hover:translate-y-[-5px] transition-transform">
                    <div class="w-12 h-12 rounded-lg bg-secondary/10 dark:bg-secondary/20 flex items-center justify-center mb-4">
                        <i class="fa-solid fa-layer-group text-secondary text-xl"></i>
                    </div>
                    <h3 class="text-xl font-semibold mb-2 text-dark-200 dark:text-light-100">ä¸°å¯Œåˆ†ç±»</h3>
                    <p id="category-info" class="text-muted-dark dark:text-muted-light">10+ å›¾ç‰‡åˆ†ç±»ï¼Œè¦†ç›–è‡ªç„¶ã€åŸå¸‚ã€åŠ¨ç‰©ã€è‰ºæœ¯ç­‰å¤šç§åœºæ™¯</p>
                </div>
                <div class="bg-card p-6 hover:translate-y-[-5px] transition-transform">
                    <div class="w-12 h-12 rounded-lg bg-accent/10 dark:bg-accent/20 flex items-center justify-center mb-4">
                        <i class="fa-solid fa-shield-halved text-accent text-xl"></i>
                    </div>
                    <h3 class="text-xl font-semibold mb-2 text-dark-200 dark:text-light-100">ç¨³å®šå¯é </h3>
                    <p class="text-muted-dark dark:text-muted-light">99.9% å¯ç”¨æ€§ä¿éšœï¼Œè‡ªåŠ¨å®¹ç¾å¤‡ä»½ï¼Œæ”¯æŒé«˜å¹¶å‘è®¿é—®</p>
                </div>
            </div>
        </section>

        <!-- æ¼”ç¤ºåŒºåŸŸ - é»˜è®¤éšè— -->
        <section id="demo" class="mb-2 md:mb-4 module-hidden">
            <div class="bg-card p-6 md:p-8 max-w-5xl mx-auto">
                <div class="flex items-center justify-between mb-8">
                    <h3 class="text-2xl md:text-3xl font-bold flex items-center text-dark-200 dark:text-light-100">
                        <div class="w-10 h-10 rounded-lg bg-primary/20 flex items-center justify-center mr-3">
                            <i class="fa-solid fa-terminal text-primary text-xl"></i>
                        </div>
                        APIå®æ—¶æ¼”ç¤º
                    </h3>
                    <div class="flex items-center gap-2">
                        <span class="text-sm text-muted-dark dark:text-muted-light">å½“å‰ç‰ˆæœ¬ï¼š</span>
                        <span id="current-version" class="badge badge-accent">åŠ è½½ä¸­...</span>
                    </div>
                </div>

                <!-- é«˜çº§ç­›é€‰åŒº -->
                <div class="grid grid-cols-1 md:grid-cols-4 gap-5 mb-8">
                    <div>
                        <label class="block text-sm font-medium text-muted-dark dark:text-muted-light mb-2">å›¾ç‰‡åˆ†ç±»</label>
                        <select id="category-select" class="input-style w-full">
                            <option value="default">é»˜è®¤åˆ†ç±»</option>
                            <!-- å…¶ä»–åˆ†ç±»å°†ç”±JavaScriptåŠ¨æ€åŠ è½½ -->
                        </select>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-muted-dark dark:text-muted-light mb-2">å›¾ç‰‡æ ¼å¼ <span class="badge badge-accent ml-1">å¾…å®ç°</span></label>
                        <select id="format-select" class="input-style w-full">
                            <option value="">å…¨éƒ¨æ ¼å¼</option>
                            <option value="jpg">JPG</option>
                            <option value="png">PNG</option>
                            <option value="gif">GIF (åŠ¨å›¾)</option>
                            <option value="webp">WEBP (é«˜æ¸…)</option>
                        </select>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-muted-dark dark:text-muted-light mb-2">å›¾ç‰‡å°ºå¯¸ <span class="badge badge-accent ml-1">å¾…å®ç°</span></label>
                        <select id="size-select" class="input-style w-full">
                            <option value="">é»˜è®¤å°ºå¯¸</option>
                            <option value="small">å°å°ºå¯¸ (400x300)</option>
                            <option value="medium">ä¸­å°ºå¯¸ (800x600)</option>
                            <option value="large">å¤§å°ºå¯¸ (1920x1080)</option>
                            <option value="original">åŸå§‹å°ºå¯¸</option>
                        </select>
                    </div>
                    <div class="flex items-end">
                        <button id="refresh-btn" class="btn-primary w-full">
                            <i class="fa-solid fa-shuffle mr-2"></i>è·å–éšæœºå›¾ç‰‡
                        </button>
                    </div>
                </div>

                <!-- å›¾ç‰‡æ“ä½œå·¥å…·æ  -->
                <div class="flex flex-wrap justify-between items-center gap-4 mb-4">
                    <div class="text-sm text-muted-dark dark:text-muted-light" id="image-info">
                        æœªé€‰æ‹©å›¾ç‰‡
                    </div>
                </div>

                <!-- å›¾ç‰‡å±•ç¤ºåŒº -->
                <div class="relative bg-light-200 dark:bg-dark-200 rounded-xl overflow-hidden mb-8 border border-light-300 dark:border-dark-300">
                    <div id="loading" class="text-center text-muted-dark dark:text-muted-light py-20">
                        <div class="inline-block w-16 h-16 border-4 border-primary/30 border-t-primary rounded-full animate-spin mb-4"></div>
                        <p class="text-lg">ç‚¹å‡»æŒ‰é’®è·å–éšæœºå›¾ç‰‡</p>
                    </div>
                    <img id="random-image" class="w-full hidden block" src="" alt="éšæœºå›¾ç‰‡">
                    <div id="error" class="text-center text-red-500 dark:text-red-400 py-20 hidden">
                        <i class="fa-solid fa-circle-exclamation text-4xl mb-4"></i>
                        <p id="error-message" class="text-lg">åŠ è½½å›¾ç‰‡å¤±è´¥ï¼Œè¯·é‡è¯•</p>
                    </div>
                    <!-- å›¾ç‰‡åŠ è½½å®Œæˆåçš„æ“ä½œæµ®å±‚ -->
                    <div id="image-overlay" class="absolute top-4 right-4 hidden">
                        <button class="w-9 h-9 rounded-full bg-black/50 text-white flex items-center justify-center hover:bg-black/70 transition-colors">
                            <i class="fa-solid fa-expand"></i>
                        </button>
                    </div>
                </div>

                <!-- APIé“¾æ¥å±•ç¤ºä¸æ“ä½œ -->
                <div class="grid grid-cols-1 md:grid-cols-12 gap-4">
                    <div class="md:col-span-9 relative">
                        <label class="block text-sm font-medium text-muted-dark dark:text-muted-light mb-2">APIç›´é“¾</label>
                        <div class="relative">
                            <input id="api-url" type="text" class="input-style w-full pr-12" readonly value="" placeholder="è·å–éšæœºå›¾ç‰‡åæ˜¾ç¤ºAPIé“¾æ¥">
                            <button id="copy-btn" class="absolute right-3 top-1/2 -translate-y-1/2 text-muted-dark dark:text-muted-light hover:text-primary transition-colors">
                                <i class="fa-solid fa-copy text-lg"></i>
                            </button>
                        </div>
                    </div>
                    <div class="md:col-span-3 flex gap-2">
                        <button id="open-btn" class="btn-outline flex-1 !py-1.5 text-sm">
                            <i class="fa-solid fa-up-right-from-square mr-0.5"></i>æ–°çª—å£
                        </button>
                        <button id="embed-btn" class="btn-secondary flex-1 !py-1.5 text-sm">
                            <i class="fa-solid fa-code mr-0.5"></i>åµŒå…¥
                        </button>
                    </div>
                </div>

                <!-- åµŒå…¥ä»£ç å¼¹çª— -->
                <div id="embed-modal" class="fixed inset-0 bg-black/50 flex items-center justify-center z-50 hidden">
                    <div class="bg-white dark:bg-dark-100 rounded-xl p-6 w-full max-w-lg animate-fade-in">
                        <div class="flex justify-between items-center mb-4">
                            <h4 class="text-xl font-semibold">åµŒå…¥ä»£ç </h4>
                            <button id="close-embed-modal" class="w-8 h-8 rounded-full flex items-center justify-center text-muted-dark dark:text-muted-light hover:bg-light-200 dark:hover:bg-dark-200 transition-colors">
                                <i class="fa-solid fa-xmark"></i>
                            </button>
                        </div>
                        <div class="space-y-4">
                            <div>
                                <label class="block text-sm font-medium text-muted-dark dark:text-muted-light mb-2">HTMLä»£ç </label>
                                <div class="bg-light-200 dark:bg-dark-200 rounded-lg p-3 font-mono text-sm overflow-x-auto">
                                    <code id="html-code">&lt;img src="${BASE_URL}/random" alt="éšæœºå›¾ç‰‡"&gt;</code>
                                </div>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-muted-dark dark:text-muted-light mb-2">Markdownä»£ç </label>
                                <div class="bg-light-200 dark:bg-dark-200 rounded-lg p-3 font-mono text-sm overflow-x-auto">
                                    <code id="markdown-code">![éšæœºå›¾ç‰‡](${BASE_URL}/random)</code>
                                </div>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-muted-dark dark:text-muted-light mb-2">URLç›´é“¾</label>
                                <div class="bg-light-200 dark:bg-dark-200 rounded-lg p-3 font-mono text-sm overflow-x-auto">
                                    <code id="url-code">${BASE_URL}/random</code>
                                </div>
                            </div>
                        </div>
                        <div class="mt-6 flex justify-end">
                            <button id="copy-embed-code" class="btn-primary">
                                <i class="fa-solid fa-copy mr-2"></i>å¤åˆ¶å…¨éƒ¨ä»£ç 
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- æ–‡æ¡£åŒºåŸŸ - é»˜è®¤éšè— -->
        <section id="docs" class="mb-2 md:mb-4 module-hidden">
            <div class="bg-card p-6 md:p-8 max-w-5xl mx-auto">
                <h3 class="text-2xl md:text-3xl font-bold mb-8 flex items-center text-dark-200 dark:text-light-100">
                    <div class="w-10 h-10 rounded-lg bg-primary/20 flex items-center justify-center mr-3">
                        <i class="fa-solid fa-code text-primary text-xl"></i>
                    </div>
                    å¼€å‘è€…æ–‡æ¡£
                </h3>

                <!-- æ–‡æ¡£æ ‡ç­¾é¡µ -->
                <div class="border-b border-light-300 dark:border-dark-200 mb-6">
                    <div class="flex flex-wrap gap-1">
                        <button class="doc-tab py-2 px-4 text-primary border-b-2 border-primary font-medium" data-tab="basic">åŸºç¡€ç”¨æ³•</button>
                        <button class="doc-tab py-2 px-4 text-muted-dark dark:text-muted-light hover:text-primary transition-colors" data-tab="advanced">é«˜çº§å‚æ•°</button>
                        <button class="doc-tab py-2 px-4 text-muted-dark dark:text-muted-light hover:text-primary transition-colors" data-tab="response">å“åº”è¯´æ˜</button>
                        <button class="doc-tab py-2 px-4 text-muted-dark dark:text-muted-light hover:text-primary transition-colors" data-tab="examples">ä½¿ç”¨ç¤ºä¾‹</button>
                        <button class="doc-tab py-2 px-4 text-muted-dark dark:text-muted-light hover:text-primary transition-colors" data-tab="changelog">æ›´æ–°æ—¥å¿—</button>
                    </div>
                </div>

                <!-- æ–‡æ¡£å†…å®¹åŒº -->
                <div class="doc-content" id="basic-tab">
                    <div class="space-y-8">
                        <!-- åŸºç¡€ç”¨æ³• -->
                        <div class="space-y-3">
                            <h4 class="text-xl font-semibold flex items-center">
                                <i class="fa-solid fa-circle-nodes text-primary mr-2"></i>åŸºç¡€ç”¨æ³•
                            </h4>
                            <p class="text-muted-dark dark:text-muted-light">ç›´æ¥è®¿é—®ä»¥ä¸‹URLå³å¯è·å–éšæœºå›¾ç‰‡ï¼ˆç›´é“¾è¿”å›äºŒè¿›åˆ¶æ•°æ®ï¼‰ï¼š</p>
                            <div class="bg-light-200 dark:bg-dark-200 rounded-lg p-4 font-mono text-sm border border-light-300 dark:border-dark-300 text-secondary overflow-x-auto" id="doc-base-url" data-replace-base-url>
                                ${BASE_URL}/random
                            </div>
                        </div>

                        <!-- åˆ†ç±»ç­›é€‰ -->
                        <div class="space-y-3">
                            <h4 class="text-xl font-semibold flex items-center">
                                <i class="fa-solid fa-layer-group text-primary mr-2"></i>æŒ‰åˆ†ç±»ç­›é€‰
                            </h4>
                            <p class="text-muted-dark dark:text-muted-light">é€šè¿‡typeå‚æ•°æŒ‡å®šåˆ†ç±»ï¼š</p>
                            <div class="bg-light-200 dark:bg-dark-200 rounded-lg p-4 font-mono text-sm border border-light-300 dark:border-dark-300 text-secondary mb-3 overflow-x-auto" id="doc-category-url" data-replace-base-url>
                                ${BASE_URL}/random?type=nature
                            </div>
                            <div class="bg-light-200/50 dark:bg-dark-200/50 rounded-lg p-3 border border-light-300 dark:border-dark-300 text-muted-dark dark:text-muted-light text-sm">
                                <p class="font-medium mb-1">æ”¯æŒçš„åˆ†ç±»ï¼š</p>
                                <ul class="grid grid-cols-2 md:grid-cols-3 gap-1" id="doc-category-list">
                                    <li>åŠ è½½ä¸­...</li>
                                </ul>
                            </div>
                        </div>

                        <!-- æ ¼å¼ç­›é€‰ -->
                        <div class="space-y-3">
                            <h4 class="text-xl font-semibold flex items-center">
                                <i class="fa-solid fa-file-image text-primary mr-2"></i>æŒ‰æ ¼å¼ç­›é€‰
                                <span class="badge badge-accent ml-2">å¾…å®ç°</span>
                            </h4>
                            <p class="text-muted-dark dark:text-muted-light">é€šè¿‡URLå‚æ•°æŒ‡å®šå›¾ç‰‡æ ¼å¼ï¼š</p>
                            <div class="bg-light-200 dark:bg-dark-200 rounded-lg p-4 font-mono text-sm border border-light-300 dark:border-dark-300 text-secondary overflow-x-auto" id="doc-format-url" data-replace-base-url>
                                ${BASE_URL}/random?format=png
                            </div>
                        </div>
                    </div>
                </div>

                <div class="doc-content hidden" id="advanced-tab">
                    <div class="space-y-8">
                        <h4 class="text-xl font-semibold mb-4">é«˜çº§å‚æ•°è¯´æ˜</h4>
                        <div class="overflow-x-auto">
                            <table class="w-full border-collapse">
                                <thead>
                                    <tr class="bg-light-200 dark:bg-dark-200">
                                        <th class="border border-light-300 dark:border-dark-300 px-5 py-3 text-left">å‚æ•°å</th>
                                        <th class="border border-light-300 dark:border-dark-300 px-5 py-3 text-left">ç±»å‹</th>
                                        <th class="border border-light-300 dark:border-dark-300 px-5 py-3 text-left">é»˜è®¤å€¼</th>
                                        <th class="border border-light-300 dark:border-dark-300 px-5 py-3 text-left">çŠ¶æ€</th>
                                        <th class="border border-light-300 dark:border-dark-300 px-5 py-3 text-left">è¯´æ˜</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr class="hover:bg-light-200/50 dark:hover:bg-dark-200/50 transition-colors">
                                        <td class="border border-light-300 dark:border-dark-300 px-5 py-3 font-medium">format</td>
                                        <td class="border border-light-300 dark:border-dark-300 px-5 py-3">string</td>
                                        <td class="border border-light-300 dark:border-dark-300 px-5 py-3">æ— </td>
                                        <td class="border border-light-300 dark:border-dark-300 px-5 py-3"><span class="badge badge-accent">å¾…å®ç°</span></td>
                                        <td class="border border-light-300 dark:border-dark-300 px-5 py-3">å›¾ç‰‡æ ¼å¼ï¼šjpg/png/gif/webp</td>
                                    </tr>
                                    <tr class="hover:bg-light-200/50 dark:hover:bg-dark-200/50 transition-colors bg-light-200/20 dark:bg-dark-200/20">
                                        <td class="border border-light-300 dark:border-dark-300 px-5 py-3 font-medium">size</td>
                                        <td class="border border-light-300 dark:border-dark-300 px-5 py-3">string</td>
                                        <td class="border border-light-300 dark:border-dark-300 px-5 py-3">original</td>
                                        <td class="border border-light-300 dark:border-dark-300 px-5 py-3"><span class="badge badge-accent">å¾…å®ç°</span></td>
                                        <td class="border border-light-300 dark:border-dark-300 px-5 py-3">å›¾ç‰‡å°ºå¯¸ï¼šsmall/medium/large/original</td>
                                    </tr>
                                    <tr class="hover:bg-light-200/50 dark:hover:bg-dark-200/50 transition-colors">
                                        <td class="border border-light-300 dark:border-dark-300 px-5 py-3 font-medium">exclude</td>
                                        <td class="border border-light-300 dark:border-dark-300 px-5 py-3">string</td>
                                        <td class="border border-light-300 dark:border-dark-300 px-5 py-3">æ— </td>
                                        <td class="border border-light-300 dark:border-dark-300 px-5 py-3"><span class="badge badge-accent">å¾…å®ç°</span></td>
                                        <td class="border border-light-300 dark:border-dark-300 px-5 py-3">æ’é™¤æŒ‡å®šå›¾ç‰‡IDï¼Œå¤šä¸ªç”¨é€—å·åˆ†éš”</td>
                                    </tr>
                                    <tr class="hover:bg-light-200/50 dark:hover:bg-dark-200/50 transition-colors bg-light-200/20 dark:bg-dark-200/20">
                                        <td class="border border-light-300 dark:border-dark-300 px-5 py-3 font-medium">refresh</td>
                                        <td class="border border-light-300 dark:border-dark-300 px-5 py-3">boolean</td>
                                        <td class="border border-light-300 dark:border-dark-300 px-5 py-3">false</td>
                                        <td class="border border-light-300 dark:border-dark-300 px-5 py-3"><span class="badge badge-accent">å¾…å®ç°</span></td>
                                        <td class="border border-light-300 dark:border-dark-300 px-5 py-3">æ˜¯å¦å¼ºåˆ¶åˆ·æ–°ç¼“å­˜ï¼štrue/false</td>
                                    </tr>
                                    <tr class="hover:bg-light-200/50 dark:hover:bg-dark-200/50 transition-colors">
                                        <td class="border border-light-300 dark:border-dark-300 px-5 py-3 font-medium">type</td>
                                        <td class="border border-light-300 dark:border-dark-300 px-5 py-3">string</td>
                                        <td class="border border-light-300 dark:border-dark-300 px-5 py-3">æ— </td>
                                        <td class="border border-light-300 dark:border-dark-300 px-5 py-3"><span class="badge badge-secondary">å·²å®ç°</span></td>
                                        <td class="border border-light-300 dark:border-dark-300 px-5 py-3">æŒ‰åˆ†ç±»ç­›é€‰å›¾ç‰‡ï¼Œæœªä¼ è¾“åˆ™ä»æ‰€æœ‰åˆ†ç±»é‡ŒéšæœºæŒ‘é€‰å›¾ç‰‡è¿”å›</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>

                        <div class="space-y-3">
                            <h4 class="text-xl font-semibold flex items-center">
                                <i class="fa-solid fa-code-compare text-primary mr-2"></i>ç»„åˆä½¿ç”¨ç¤ºä¾‹
                            </h4>
                            <div class="bg-light-200 dark:bg-dark-200 rounded-lg p-4 font-mono text-sm border border-light-300 dark:border-dark-300 text-secondary overflow-x-auto" id="doc-combo-url" data-replace-base-url>
                                ${BASE_URL}/random?type=nature&format=jpg&size=medium
                            </div>
                        </div>
                    </div>
                </div>

                <div class="doc-content hidden" id="response-tab">
                    <div class="space-y-8">
                        <h4 class="text-xl font-semibold mb-4">å“åº”è¯´æ˜</h4>
                        <div class="overflow-x-auto">
                            <table class="w-full border-collapse">
                                <thead>
                                    <tr class="bg-light-200 dark:bg-dark-200">
                                        <th class="border border-light-300 dark:border-dark-300 px-5 py-3 text-left text-dark-200 dark:text-light-100">çŠ¶æ€ç </th>
                                        <th class="border border-light-300 dark:border-dark-300 px-5 py-3 text-left text-dark-200 dark:text-light-100">è¯´æ˜</th>
                                        <th class="border border-light-300 dark:border-dark-300 px-5 py-3 text-left text-dark-200 dark:text-light-100">å“åº”ç±»å‹</th>
                                        <th class="border border-light-300 dark:border-dark-300 px-5 py-3 text-left text-dark-200 dark:text-light-100">å“åº”ç¤ºä¾‹</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr class="hover:bg-light-200/50 dark:hover:bg-dark-200/50 transition-colors">
                                        <td class="border border-light-300 dark:border-dark-300 px-5 py-3 text-primary font-medium">200</td>
                                        <td class="border border-light-300 dark:border-dark-300 px-5 py-3 text-muted-dark dark:text-muted-light">æˆåŠŸè¿”å›å›¾ç‰‡</td>
                                        <td class="border border-light-300 dark:border-dark-300 px-5 py-3 text-muted-dark dark:text-muted-light">å›¾ç‰‡äºŒè¿›åˆ¶æ•°æ®</td>
                                        <td class="border border-light-300 dark:border-dark-300 px-5 py-3 text-muted-dark dark:text-muted-light">-</td>
                                    </tr>
                                    <tr class="hover:bg-light-200/50 dark:hover:bg-dark-200/50 transition-colors bg-light-200/20 dark:bg-dark-200/20">
                                        <td class="border border-light-300 dark:border-dark-300 px-5 py-3 text-yellow-500 dark:text-yellow-400 font-medium">404</td>
                                        <td class="border border-light-300 dark:border-dark-300 px-5 py-3 text-muted-dark dark:text-muted-light">åˆ†ç±»ä¸å­˜åœ¨/æ— å›¾ç‰‡</td>
                                        <td class="border border-light-300 dark:border-dark-300 px-5 py-3 text-muted-dark dark:text-muted-light">JSON</td>
                                        <td class="border border-light-300 dark:border-dark-300 px-5 py-3 font-mono text-xs">{"code":404,"msg":"åˆ†ç±»ä¸å­˜åœ¨","data":{"error_id":"2026021012345-abc1","error_time":"2026-02-10 12:34:56","category":"xxx"}}</td>
                                    </tr>
                                    <tr class="hover:bg-light-200/50 dark:hover:bg-dark-200/50 transition-colors">
                                        <td class="border border-light-300 dark:border-dark-300 px-5 py-3 text-red-500 dark:text-red-400 font-medium">500</td>
                                        <td class="border border-light-300 dark:border-dark-300 px-5 py-3 text-muted-dark dark:text-muted-light">æœåŠ¡å™¨å†…éƒ¨é”™è¯¯</td>
                                        <td class="border border-light-300 dark:border-dark-300 px-5 py-3 text-muted-dark dark:text-muted-light">JSON</td>
                                        <td class="border border-light-300 dark:border-dark-300 px-5 py-3 font-mono text-xs">{"code":500,"msg":"æœåŠ¡å™¨å†…éƒ¨é”™è¯¯","data":{"error_id":"2026021012345-abc2","error_time":"2026-02-10 12:34:56"}}</td>
                                    </tr>
                                    <tr class="hover:bg-light-200/50 dark:hover:bg-dark-200/50 transition-colors bg-light-200/20 dark:bg-dark-200/20">
                                        <td class="border border-light-300 dark:border-dark-300 px-5 py-3 text-orange-500 dark:text-orange-400 font-medium">400</td>
                                        <td class="border border-light-300 dark:border-dark-300 px-5 py-3 text-muted-dark dark:text-muted-light">è¯·æ±‚å‚æ•°éæ³•</td>
                                        <td class="border border-light-300 dark:border-dark-300 px-5 py-3 text-muted-dark dark:text-muted-light">JSON</td>
                                        <td class="border border-light-300 dark:border-dark-300 px-5 py-3 font-mono text-xs">{"code":422,"msg":"éæ³•è¯·æ±‚","data":{"request_id":"2026021012345-abc3","error_time":"2026-02-10 12:34:56","reason":"xxx"}}</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>

                        <div class="space-y-3">
                            <h4 class="text-xl font-semibold flex items-center">
                                <i class="fa-solid fa-server text-primary mr-2"></i>å“åº”å¤´è¯´æ˜
                            </h4>
                            <div class="bg-light-200/50 dark:bg-dark-200/50 rounded-lg p-4 text-muted-dark dark:text-muted-light">
                                <ul class="space-y-2">
                                    <li><strong>Content-Type</strong>ï¼šå›¾ç‰‡MIMEç±»å‹ï¼ˆimage/jpegã€image/pngã€image/gifã€image/webpç­‰ï¼‰</li>
                                    <li><strong>Content-Length</strong>ï¼šå›¾ç‰‡æ–‡ä»¶å¤§å°ï¼ˆå­—èŠ‚ï¼‰</li>
                                    <li><strong>Cache-Control</strong>ï¼šno-cache, max-age=0ï¼ˆä¸ç¼“å­˜ï¼Œç¡®ä¿æ¯æ¬¡è¯·æ±‚éƒ½è¿”å›éšæœºå›¾ç‰‡ï¼‰</li>
                                    <li><strong>Access-Control-Allow-Origin</strong>ï¼š*ï¼ˆæ”¯æŒè·¨åŸŸè®¿é—®ï¼‰</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="doc-content hidden" id="examples-tab">
                    <div class="space-y-8">
                        <h4 class="text-xl font-semibold mb-4">å¤šè¯­è¨€ä½¿ç”¨ç¤ºä¾‹</h4>

                        <div class="space-y-4">
                            <h5 class="text-lg font-medium text-primary">HTML</h5>
                            <div class="bg-light-200 dark:bg-dark-200 rounded-lg p-4 font-mono text-sm border border-light-300 dark:border-dark-300 overflow-x-auto" id="example-html" data-replace-base-url>
                                &lt;!-- åŸºç¡€ä½¿ç”¨ --&gt;<br>
                                &lt;img src="${BASE_URL}/random?type=nature&format=jpg" alt="è‡ªç„¶é£å…‰"&gt;<br><br>
                                &lt;!-- å¸¦å°ºå¯¸æ§åˆ¶ --&gt;<br>
                                &lt;img src="${BASE_URL}/random?type=city&size=medium" alt="åŸå¸‚å»ºç­‘" width="800" height="600"&gt;
                            </div>
                        </div>

                        <div class="space-y-4">
                            <h5 class="text-lg font-medium text-primary">JavaScript</h5>
                            <div class="bg-light-200 dark:bg-dark-200 rounded-lg p-4 font-mono text-sm border border-light-300 dark:border-dark-300 overflow-x-auto" id="example-js" data-replace-base-url>
                                // åŠ¨æ€åŠ è½½éšæœºå›¾ç‰‡<br>
                                function loadRandomImage() {<br>
                                &nbsp;&nbsp;const img = document.createElement('img');<br>
                                &nbsp;&nbsp;img.src = '${BASE_URL}/random?type=animal&format=png';<br>
                                &nbsp;&nbsp;img.alt = 'éšæœºåŠ¨ç‰©å›¾ç‰‡';<br>
                                &nbsp;&nbsp;img.className = 'random-img';<br>
                                &nbsp;&nbsp;document.getElementById('image-container').appendChild(img);<br>
                                }<br><br>
                                // è°ƒç”¨å‡½æ•°<br>
                                loadRandomImage();
                            </div>
                        </div>

                        <div class="space-y-4">
                            <h5 class="text-lg font-medium text-primary">Python</h5>
                            <div class="bg-light-200 dark:bg-dark-200 rounded-lg p-4 font-mono text-sm border border-light-300 dark:border-dark-300 overflow-x-auto" id="example-python" data-replace-base-url>
                                import requests<br><br>
                                # è·å–éšæœºå›¾ç‰‡å¹¶ä¿å­˜<br>
                                def save_random_image():<br>
                                &nbsp;&nbsp;url = '${BASE_URL}/random?type=art&format=webp'<br>
                                &nbsp;&nbsp;response = requests.get(url)<br>
                                &nbsp;&nbsp;if response.status_code == 200:<br>
                                &nbsp;&nbsp;&nbsp;&nbsp;with open('random_art.webp', 'wb') as f:<br>
                                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;f.write(response.content)<br>
                                &nbsp;&nbsp;&nbsp;&nbsp;print('å›¾ç‰‡ä¿å­˜æˆåŠŸ')<br>
                                &nbsp;&nbsp;else:<br>
                                &nbsp;&nbsp;&nbsp;&nbsp;print(f'è¯·æ±‚å¤±è´¥ï¼š{response.status_code}')<br><br>
                                save_random_image()
                            </div>
                        </div>

                        <div class="space-y-4">
                            <h5 class="text-lg font-medium text-primary">PHP</h5>
                            <div class="bg-light-200 dark:bg-dark-200 rounded-lg p-4 font-mono text-sm border border-light-300 dark:border-dark-300 overflow-x-auto" id="example-php" data-replace-base-url>
                                &lt;?php<br>
                                // è·å–éšæœºå›¾ç‰‡URL<br>
                                $category = 'food';<br>
                                $format = 'jpg';<br>
                                $url = "${BASE_URL}/random?type={$category}&format={$format}";<br><br>
                                // è¾“å‡ºå›¾ç‰‡æ ‡ç­¾<br>
                                echo "&lt;img src='{$url}' alt='éšæœºç¾é£Ÿå›¾ç‰‡'&gt;";<br>
                                ?&gt;
                            </div>
                        </div>
                    </div>
                </div>

                <div class="doc-content hidden" id="changelog-tab">
                    <div class="space-y-8" id="changelog-content">
                        <h4 class="text-2xl font-bold mb-6">æ›´æ–°æ—¥å¿—</h4>
                        <!-- æ›´æ–°æ—¥å¿—å°†ç”± JavaScript åŠ¨æ€åŠ è½½ -->
                    </div>
                </div>
            </div>
        </section>

        <!-- åˆ†ç±»é¢„è§ˆåŒº - é»˜è®¤éšè— -->
        <section id="categories" class="mb-2 md:mb-4 module-hidden">
            <h3 class="text-2xl md:text-3xl font-bold mb-10 text-center flex items-center justify-center text-dark-200 dark:text-light-100">
                <div class="w-10 h-10 rounded-lg bg-primary/20 flex items-center justify-center mr-3">
                    <i class="fa-solid fa-th text-primary text-xl"></i>
                </div>
                å›¾ç‰‡åˆ†ç±»é¢„è§ˆ
            </h3>

            <div class="max-w-[1400px] mx-auto grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 md:gap-6" id="categories-grid">
                <!-- åˆ†ç±»å¡ç‰‡å°†ç”±JavaScriptåŠ¨æ€ç”Ÿæˆ -->
            </div>

            <!-- åˆ†é¡µæ§ä»¶ -->
            <div class="max-w-[1400px] mx-auto mt-8 flex items-center justify-center gap-4">
                <button id="prev-page" class="px-4 py-2 rounded-lg bg-card border border-light-300 dark:border-dark-300 hover:bg-light-200 dark:hover:bg-dark-200 disabled:opacity-50 disabled:cursor-not-allowed transition-colors">
                    <i class="fa-solid fa-chevron-left mr-2"></i>ä¸Šä¸€é¡µ
                </button>
                <span id="page-info" class="text-muted-dark dark:text-muted-light">ç¬¬ 1 / 1 é¡µ</span>
                <button id="next-page" class="px-4 py-2 rounded-lg bg-card border border-light-300 dark:border-dark-300 hover:bg-light-200 dark:hover:bg-dark-200 disabled:opacity-50 disabled:cursor-not-allowed transition-colors">
                    ä¸‹ä¸€é¡µ<i class="fa-solid fa-chevron-right ml-2"></i>
                </button>
            </div>
        </section>

        <!-- åˆ†ç±»å›¾ç‰‡åˆ—è¡¨è§†å›¾ - é»˜è®¤éšè— -->
        <section id="category-images" class="mb-2 md:mb-4 module-hidden">
            <div class="max-w-[1400px] mx-auto">
                <div class="flex items-center justify-between mb-8">
                    <h3 class="text-2xl md:text-3xl font-bold flex items-center text-dark-200 dark:text-light-100">
                        <div class="w-10 h-10 rounded-lg bg-primary/20 flex items-center justify-center mr-3">
                            <i class="fa-solid fa-images text-primary text-xl"></i>
                        </div>
                        <span id="category-title">åˆ†ç±»å›¾ç‰‡åˆ—è¡¨</span>
                    </h3>
                    <button onclick="backToCategories()" class="btn-outline">
                        <i class="fa-solid fa-arrow-left mr-2"></i>è¿”å›åˆ†ç±»åˆ—è¡¨
                    </button>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 md:gap-6" id="category-images-grid">
                    <!-- å›¾ç‰‡å°†ç”±JavaScriptåŠ¨æ€ç”Ÿæˆ -->
                </div>

                <!-- åˆ†é¡µæ§ä»¶ -->
                <div class="mt-8 flex items-center justify-center gap-4">
                    <button id="category-images-prev" class="px-4 py-2 rounded-lg bg-card border border-light-300 dark:border-dark-300 hover:bg-light-200 dark:hover:bg-dark-200 disabled:opacity-50 disabled:cursor-not-allowed transition-colors">
                        <i class="fa-solid fa-chevron-left mr-2"></i>ä¸Šä¸€é¡µ
                    </button>
                    <span id="category-images-page-info" class="text-muted-dark dark:text-muted-light">ç¬¬ 1 / 1 é¡µ</span>
                    <button id="category-images-next" class="px-4 py-2 rounded-lg bg-card border border-light-300 dark:border-dark-300 hover:bg-light-200 dark:hover:bg-dark-200 disabled:opacity-50 disabled:cursor-not-allowed transition-colors">
                        ä¸‹ä¸€é¡µ<i class="fa-solid fa-chevron-right ml-2"></i>
                    </button>
                </div>
            </div>
        </section>

        <!-- ç»Ÿè®¡åŒºåŸŸ - é»˜è®¤éšè— -->
        <section id="stats" class="mb-2 md:mb-4 module-hidden">
            <div class="bg-card p-6 md:p-8 max-w-5xl mx-auto">
                <h3 class="text-2xl md:text-3xl font-bold mb-8 flex items-center text-dark-200 dark:text-light-100">
                    <div class="w-10 h-10 rounded-lg bg-primary/20 flex items-center justify-center mr-3">
                        <i class="fa-solid fa-chart-simple text-primary text-xl"></i>
                    </div>
                    APIä½¿ç”¨ç»Ÿè®¡ <span class="badge badge-accent text-sm ml-2">å¾…å®ç°</span>
                </h3>

                <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                    <div class="bg-light-200/50 dark:bg-dark-200/50 rounded-xl p-6 border border-light-300 dark:border-dark-300">
                        <div class="text-muted-dark dark:text-muted-light text-sm mb-2">æ€»è¯·æ±‚æ¬¡æ•°</div>
                        <div class="text-3xl md:text-4xl font-bold text-primary mb-2">12,589,478</div>
                        <div class="text-sm text-secondary flex items-center">
                            <i class="fa-solid fa-arrow-trend-up mr-1"></i> è¾ƒä¸Šæœˆå¢é•¿ 18.5%
                        </div>
                    </div>
                    <div class="bg-light-200/50 dark:bg-dark-200/50 rounded-xl p-6 border border-light-300 dark:border-dark-300">
                        <div class="text-muted-dark dark:text-muted-light text-sm mb-2">å›¾ç‰‡æ€»æ•°</div>
                        <div class="text-3xl md:text-4xl font-bold text-primary mb-2">8,742</div>
                        <div class="text-sm text-secondary flex items-center">
                            <i class="fa-solid fa-plus mr-1"></i> æœ¬å‘¨æ–°å¢ 128 å¼ 
                        </div>
                    </div>
                    <div class="bg-light-200/50 dark:bg-dark-200/50 rounded-xl p-6 border border-light-300 dark:border-dark-300">
                        <div class="text-muted-dark dark:text-muted-light text-sm mb-2">æ´»è·ƒç”¨æˆ·</div>
                        <div class="text-3xl md:text-4xl font-bold text-primary mb-2">24,856</div>
                        <div class="text-sm text-secondary flex items-center">
                            <i class="fa-solid fa-users mr-1"></i> æ˜¨æ—¥æ–°å¢ 328 äºº
                        </div>
                    </div>
                </div>

                <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                    <!-- åˆ†ç±»è®¿é—®ç»Ÿè®¡å›¾è¡¨ -->
                    <div class="bg-light-200/50 dark:bg-dark-200/50 rounded-xl p-6 border border-light-300 dark:border-dark-300">
                        <h4 class="text-lg font-semibold mb-4">åˆ†ç±»è®¿é—®é‡ç»Ÿè®¡</h4>
                        <div class="h-80">
                            <canvas id="categoryChart"></canvas>
                        </div>
                    </div>

                    <!-- æœˆåº¦è®¿é—®è¶‹åŠ¿å›¾è¡¨ -->
                    <div class="bg-light-200/50 dark:bg-dark-200/50 rounded-xl p-6 border border-light-300 dark:border-dark-300">
                        <h4 class="text-lg font-semibold mb-4">æœˆåº¦è®¿é—®è¶‹åŠ¿</h4>
                        <div class="h-80">
                            <canvas id="trendChart"></canvas>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- åé¦ˆåŒºåŸŸ - é»˜è®¤éšè— -->
        <section id="feedback" class="mb-2 md:mb-4 module-hidden">
            <div class="bg-card p-6 md:p-8 max-w-5xl mx-auto">
                <h3 class="text-2xl md:text-3xl font-bold mb-8 flex items-center text-dark-200 dark:text-light-100">
                    <div class="w-10 h-10 rounded-lg bg-primary/20 flex items-center justify-center mr-3">
                        <i class="fa-solid fa-comment-dots text-primary text-xl"></i>
                    </div>
                    ç”¨æˆ·åé¦ˆ
                </h3>

                <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                    <!-- åé¦ˆè¡¨å• -->
                    <div>
                        <h4 class="text-xl font-semibold mb-6">æäº¤åé¦ˆ</h4>
                        <form id="feedback-form" class="space-y-5">
                            <div>
                                <label class="block text-sm font-medium text-muted-dark dark:text-muted-light mb-2">æ‚¨çš„é‚®ç®±</label>
                                <input type="email" class="input-style w-full" placeholder="your@email.com" required>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-muted-dark dark:text-muted-light mb-2">åé¦ˆç±»å‹</label>
                                <select class="input-style w-full">
                                    <option>åŠŸèƒ½å»ºè®®</option>
                                    <option>é—®é¢˜åé¦ˆ</option>
                                    <option>åˆä½œå’¨è¯¢</option>
                                    <option>å…¶ä»–</option>
                                </select>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-muted-dark dark:text-muted-light mb-2">åé¦ˆå†…å®¹</label>
                                <textarea class="input-style w-full h-32" placeholder="è¯·è¯¦ç»†æè¿°æ‚¨çš„å»ºè®®æˆ–é—®é¢˜..." required></textarea>
                            </div>
                            <button type="submit" class="btn-primary w-full">
                                <i class="fa-solid fa-paper-plane mr-2"></i>æäº¤åé¦ˆ
                            </button>
                        </form>
                    </div>

                    <!-- å¸¸è§é—®é¢˜ -->
                    <div>
                        <h4 class="text-xl font-semibold mb-6">å¸¸è§é—®é¢˜</h4>
                        <div class="space-y-4">
                        <div class="bg-light-200/50 dark:bg-dark-200/50 rounded-lg p-4 border border-light-300 dark:border-dark-300">
                            <h5 class="font-medium mb-2">APIå¦‚ä½•ä½¿ç”¨ï¼Ÿ</h5>
                            <p class="text-sm text-muted-dark dark:text-muted-light" id="faq-api-usage">ç›´æ¥è®¿é—® ${BASE_URL}/random å³å¯è·å–éšæœºå›¾ç‰‡ï¼Œæ”¯æŒåˆ†ç±»ç­›é€‰å’Œæ ¼å¼è¿‡æ»¤ã€‚</p>
                        </div>
                            <div class="bg-light-200/50 dark:bg-dark-200/50 rounded-lg p-4 border border-light-300 dark:border-dark-300">
                                <h5 class="font-medium mb-2">å›¾ç‰‡å¯ä»¥å•†ç”¨å—ï¼Ÿ</h5>
                                <p class="text-sm text-muted-dark dark:text-muted-light">æ‰€æœ‰å›¾ç‰‡å‡ä¸ºç”¨æˆ·ä¸Šä¼ å›¾ç‰‡ï¼Œä¸å¯ç”¨äºä»»ä½•å•†ä¸šé¡¹ç›®ä¸­ã€‚</p>
                            </div>
                            <div class="bg-light-200/50 dark:bg-dark-200/50 rounded-lg p-4 border border-light-300 dark:border-dark-300">
                                <h5 class="font-medium mb-2">æœ‰è®¿é—®é¢‘ç‡é™åˆ¶å—ï¼Ÿ</h5>
                                <p class="text-sm text-muted-dark dark:text-muted-light">ä¸ºé˜²æ­¢æ»¥ç”¨ï¼Œæ¯ä¸ªIPæ¯åˆ†é’Ÿæœ€å¤šå¯è¯·æ±‚60æ¬¡ï¼Œè¶…å‡ºé™åˆ¶å°†è¿”å›429é”™è¯¯ã€‚</p>
                            </div>
                            <div class="bg-light-200/50 dark:bg-dark-200/50 rounded-lg p-4 border border-light-300 dark:border-dark-300">
                                <h5 class="font-medium mb-2">å¦‚ä½•è·å¾—æ›´å¿«çš„å“åº”é€Ÿåº¦ï¼Ÿ</h5>
                                <p class="text-sm text-muted-dark dark:text-muted-light">APIå·²åœ¨å…¨çƒéƒ¨ç½²CDNèŠ‚ç‚¹ï¼Œè‡ªåŠ¨é€‰æ‹©æœ€è¿‘èŠ‚ç‚¹ï¼Œç¡®ä¿æ¯«ç§’çº§å“åº”ã€‚</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- é¡µè„š -->
    <footer class="bg-white dark:bg-dark-100 border-t border-light-300 dark:border-dark-200 py-5">
        <div class="container mx-auto px-4">
            <div class="flex flex-col items-center gap-2">
                <!-- ç‰ˆæƒå£°æ˜ï¼ˆå±…ä¸­ï¼‰ -->
                <div class="text-muted-dark dark:text-muted-light text-sm">
                    Â© 2026 Random Image API. All rights reserved.
                </div>

                <!-- å¤‡æ¡ˆå·å’Œç¤¾äº¤å›¾æ ‡ï¼ˆå±…ä¸­ï¼Œå¤‡æ¡ˆå·é»˜è®¤éšè—ï¼‰ -->
                <div id="footer-bottom" class="flex items-center gap-8 text-muted-dark dark:text-muted-light text-sm">
                    <div id="beian-info" class="hidden">
                        <a href="https://beian.miit.gov.cn" target="_blank" class="hover:text-primary transition-colors">
                        </a>
                    </div>
                    <div class="flex gap-4">
                        <a id="github-footer-link" href="https://github.com/YunJian101/Random-Pictures" data-github-url="{{NAV_GITHUB_URL}}" target="_blank" class="hover:text-primary transition-colors">
                            <i class="fa-brands fa-github text-xl"></i>
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </footer>

    <!-- JavaScript ä»£ç  -->
    <script>
        // è·å–å½“å‰é¡µé¢çš„åŸºç¡€URL
        const BASE_URL = window.location.protocol + '//' + window.location.host;

        // å…¨å±€å˜é‡ï¼šå­˜å‚¨ä»åç«¯è·å–çš„åˆ†ç±»æ•°æ®
        let categoriesData = [];

        // ç­‰å¾…DOMåŠ è½½å®Œæˆ
        document.addEventListener('DOMContentLoaded', function() {
            console.log('DOMå·²åŠ è½½å®Œæˆ');
            console.log('åŸºç¡€URL:', BASE_URL);

            // æ£€æŸ¥æ˜¯å¦æœ‰éœ€è¦æ‰“å¼€çš„æ¨¡å—
            const openModule = localStorage.getItem('openModule');
            if (openModule) {
                localStorage.removeItem('openModule');
                setTimeout(() => {
                    showModule(openModule);
                }, 100);
            }

            // ä»åç«¯åŠ è½½é…ç½®ä¿¡æ¯ï¼ˆåŒ…å«ç‰ˆæœ¬å·å’Œå¤‡æ¡ˆå·ï¼‰
            loadConfig();

            // ä»åç«¯åŠ è½½åˆ†ç±»æ•°æ®
            loadCategoriesFromBackend();

            // ä» GitHub åŠ è½½æ›´æ–°æ—¥å¿—
            loadGitHubReleases();

            // æ£€æŸ¥ç”¨æˆ·ç™»å½•çŠ¶æ€
            checkAuthStatus();
        });

        // æ£€æŸ¥ç”¨æˆ·ç™»å½•çŠ¶æ€
        async function checkAuthStatus() {
            try {
                const response = await fetch(`${BASE_URL}/api/auth/verify`, {
                    credentials: 'same-origin'  // ç¡®ä¿å‘é€cookie
                });
                const data = await response.json();

                const authBtn = document.getElementById('auth-btn');
                const mobileAuthBtn = document.getElementById('mobile-auth-btn');
                const authText = document.getElementById('auth-text');
                const mobileAuthText = document.getElementById('mobile-auth-text');

                if (data.code === 200) {
                    // å·²ç™»å½•
                    const username = data.data.user.username;
                    const role = data.data.user.role;

                    if (role === 'admin') {
                        authText.textContent = `${username} (ç®¡ç†å‘˜)`;
                        mobileAuthText.textContent = `æ¬¢è¿, ${username} (ç®¡ç†å‘˜)`;
                        // ç®¡ç†å‘˜è·³è½¬åˆ°ç®¡ç†åå°
                        authBtn.href = '/admin-panel';
                        mobileAuthBtn.href = '/admin-panel';
                    } else {
                        authText.textContent = username;
                        mobileAuthText.textContent = `æ¬¢è¿, ${username}`;
                        // æ™®é€šç”¨æˆ·è·³è½¬åˆ°ç”¨æˆ·åå°
                        authBtn.href = '/user-panel';
                        mobileAuthBtn.href = '/user-panel';
                    }
                    
                    // å­˜å‚¨ç™»å½•çŠ¶æ€åˆ°localStorageï¼Œç”¨äºè·¨é¡µé¢åŒæ­¥
                    localStorage.setItem('auth_status', JSON.stringify({
                        isLoggedIn: true,
                        username: username,
                        role: role,
                        timestamp: Date.now()
                    }));
                } else {
                    // æœªç™»å½•
                    authText.textContent = 'ç™»å½•';
                    mobileAuthText.textContent = 'ç™»å½•/æ³¨å†Œ';
                    authBtn.href = '/login';
                    mobileAuthBtn.href = '/login';
                    
                    // æ¸…é™¤ç™»å½•çŠ¶æ€
                    localStorage.setItem('auth_status', JSON.stringify({
                        isLoggedIn: false,
                        timestamp: Date.now()
                    }));
                }
            } catch (error) {
                console.log('æ£€æŸ¥ç™»å½•çŠ¶æ€å¤±è´¥:', error);
                // ç½‘ç»œé”™è¯¯æ—¶æ˜¾ç¤ºç™»å½•æŒ‰é’®
                const authText = document.getElementById('auth-text');
                const mobileAuthText = document.getElementById('mobile-auth-text');
                if (authText) authText.textContent = 'ç™»å½•';
                if (mobileAuthText) mobileAuthText.textContent = 'ç™»å½•/æ³¨å†Œ';
                
                // æ¸…é™¤ç™»å½•çŠ¶æ€
                localStorage.setItem('auth_status', JSON.stringify({
                    isLoggedIn: false,
                    timestamp: Date.now()
                }));
            }
        }
        
        // ç›‘å¬å­˜å‚¨äº‹ä»¶ï¼Œå®ç°è·¨é¡µé¢ç™»å½•çŠ¶æ€åŒæ­¥
        window.addEventListener('storage', function(e) {
            if (e.key === 'auth_status') {
                try {
                    const authStatus = JSON.parse(e.newValue);
                    if (!authStatus.isLoggedIn) {
                        // å…¶ä»–é¡µé¢å·²é€€å‡ºç™»å½•ï¼ŒåŒæ­¥çŠ¶æ€
                        const authText = document.getElementById('auth-text');
                        const mobileAuthText = document.getElementById('mobile-auth-text');
                        const authBtn = document.getElementById('auth-btn');
                        const mobileAuthBtn = document.getElementById('mobile-auth-btn');
                        
                        if (authText) authText.textContent = 'ç™»å½•';
                        if (mobileAuthText) mobileAuthText.textContent = 'ç™»å½•/æ³¨å†Œ';
                        if (authBtn) authBtn.href = '/login';
                        if (mobileAuthBtn) mobileAuthBtn.href = '/login';
                    } else {
                        // å…¶ä»–é¡µé¢å·²ç™»å½•ï¼ŒåŒæ­¥çŠ¶æ€
                        const authText = document.getElementById('auth-text');
                        const mobileAuthText = document.getElementById('mobile-auth-text');
                        const authBtn = document.getElementById('auth-btn');
                        const mobileAuthBtn = document.getElementById('mobile-auth-btn');
                        
                        if (authText) authText.textContent = authStatus.username || 'ç”¨æˆ·';
                        if (mobileAuthText) mobileAuthText.textContent = authStatus.username || 'ç”¨æˆ·';
                        if (authBtn) authBtn.href = '/user-panel';
                        if (mobileAuthBtn) mobileAuthBtn.href = '/user-panel';
                    }
                } catch (error) {
                    console.error('è§£æç™»å½•çŠ¶æ€å¤±è´¥:', error);
                }
            }
        });
        
        // å®šæœŸæ£€æŸ¥ç™»å½•çŠ¶æ€ï¼ˆæ¯30ç§’ï¼‰
        setInterval(checkAuthStatus, 30000);

        // å…¨å±€å˜é‡ï¼šå½“å‰é¡µç ã€æ€»é¡µæ•°ã€æ€»åˆ†ç±»æ•°
        let currentPage = 1;
        let totalPages = 1;
        let totalCategories = 0;

        // ä»åç«¯åŠ è½½é…ç½®ä¿¡æ¯
        async function loadConfig() {
            try {
                // ä»æ–°çš„ç‰ˆæœ¬ä¿¡æ¯APIè·å–ç‰ˆæœ¬ä¿¡æ¯
                const versionResponse = await fetch('/api/system/version');
                if (versionResponse.ok) {
                    const versionData = await versionResponse.json();
                    console.log('ç‰ˆæœ¬ä¿¡æ¯:', versionData);
                    
                    // æ›´æ–°ç‰ˆæœ¬æ˜¾ç¤º
                    if (versionData.code === 200 && versionData.data.version) {
                        const versionElement = document.getElementById('current-version');
                        if (versionElement) {
                            versionElement.textContent = 'v' + versionData.data.version;
                        }
                    }
                }

                // ç»§ç»­ä»config APIè·å–å…¶ä»–é…ç½®ä¿¡æ¯
                const configResponse = await fetch(`${BASE_URL}/api/config`);
                if (configResponse.ok) {
                    const configData = await configResponse.json();
                    console.log('é…ç½®ä¿¡æ¯:', configData);

                    // å¦‚æœæœ‰å¤‡æ¡ˆå·ï¼Œæ˜¾ç¤ºå¤‡æ¡ˆä¿¡æ¯
                    if (configData.icp_beian_code) {
                        const beianEl = document.getElementById('beian-info');
                        const beianLink = beianEl.querySelector('a');
                        if (beianLink) {
                            beianLink.textContent = configData.icp_beian_code;
                            beianLink.href = configData.icp_beian_url || 'https://beian.miit.gov.cn';
                            beianEl.classList.remove('hidden');
                        }
                    }
                }
            } catch (error) {
                console.error('åŠ è½½é…ç½®ä¿¡æ¯å¤±è´¥:', error);
            }
        }

        // åˆå§‹åŒ–GitHub URL
        function initGitHubUrl() {
            const githubLink = document.getElementById('github-footer-link');
            const dataGithubUrl = githubLink?.getAttribute('data-github-url');
            if (dataGithubUrl && dataGithubUrl.trim() && dataGithubUrl !== '{{NAV_GITHUB_URL}}') {
                githubLink.href = dataGithubUrl.trim();
            }
        }

        // æ›´æ–°é¡¶éƒ¨é€šçŸ¥æ  - æ»šåŠ¨æ˜¾ç¤ºæœ€æ–°ç‰ˆæœ¬çš„æ›´æ–°å†…å®¹
        let announcementItems = [];
        let currentAnnouncementIndex = 0;
        let announcementInterval = null;

        function updateAnnouncement(releases) {
            const announcementText = document.getElementById('announcement-text');
            if (!announcementText) {
                console.warn('æœªæ‰¾åˆ°announcement-textå…ƒç´ ');
                return;
            }
            
            // å¦‚æœæ²¡æœ‰æœ‰æ•ˆçš„releasesæ•°æ®æˆ–è€…ä¸ºnull/undefinedï¼Œæ˜¾ç¤ºé”™è¯¯æ–‡æœ¬
            if (!releases || !Array.isArray(releases) || releases.length === 0) {
                console.warn('æ— æœ‰æ•ˆçš„releasesæ•°æ®');
                announcementText.innerHTML = '<p>æ¬¢è¿ä½¿ç”¨éšæœºå›¾ç‰‡API</p>';
                return;
            }

            try {
                // è·å–å½“å‰æœ¬åœ°ç‰ˆæœ¬å·
                const currentVersionElement = document.getElementById('current-version');
                const currentVersion = currentVersionElement ? currentVersionElement.textContent.replace('v', '') : '';

                // æŸ¥æ‰¾ä¸å½“å‰ç‰ˆæœ¬åŒ¹é…çš„release
                let targetRelease = null;
                for (const release of releases) {
                    const releaseVersion = release.tag_name || release.name || '';
                    const releaseVersionClean = releaseVersion.replace(/^v/i, '');
                    if (releaseVersionClean && currentVersion && releaseVersionClean === currentVersion) {
                        targetRelease = release;
                        break;
                    }
                }

                // å¦‚æœæ²¡æ‰¾åˆ°åŒ¹é…çš„ç‰ˆæœ¬ï¼Œä½¿ç”¨æœ€æ–°ç‰ˆæœ¬
                if (!targetRelease) {
                    targetRelease = releases[0];
                }

                if (!targetRelease) {
                    console.warn('targetReleaseä¸ºç©º');
                    announcementText.innerHTML = '<p>æ¬¢è¿ä½¿ç”¨éšæœºå›¾ç‰‡API</p>';
                    return;
                }
                const bodyText = targetRelease.body || '';
                const version = targetRelease.tag_name || targetRelease.name || 'æœ€æ–°ç‰ˆæœ¬';

            // è§£ææ›´æ–°å†…å®¹
            const updates = [];
            const segments = bodyText.split(/\n+/);
            let currentCategory = '';

            for (let segment of segments) {
                const trimmedLine = segment.trim();
                if (!trimmedLine) continue;

                const titleMatch = trimmedLine.match(/^#{1,3}\s+(.+)/);

                if (titleMatch) {
                    currentCategory = titleMatch[1].trim();
                } else {
                    const listMatch = trimmedLine.match(/^[-*â€¢]\s+(.+)/);
                    const numberedMatch = trimmedLine.match(/^\d+[.)]\s*(.+)/);

                    if (listMatch) {
                        const text = listMatch[1].trim();
                        if (currentCategory) {
                            updates.push(`${currentCategory}: ${text}`);
                        } else {
                            updates.push(text);
                        }
                    } else if (numberedMatch) {
                        const text = numberedMatch[1].trim();
                        if (currentCategory) {
                            updates.push(`${currentCategory}: ${text}`);
                        } else {
                            updates.push(text);
                        }
                    } else if (trimmedLine.length < 100 && !trimmedLine.includes('http')) {
                        updates.push(trimmedLine);
                    }
                }
            }

            // æ·»åŠ ç‰ˆæœ¬ä¿¡æ¯
            const versionInfo = `${version} å·²å‘å¸ƒ`;
            announcements = [versionInfo, ...updates.slice(0, 5)]; // æœ€å¤šæ˜¾ç¤º5æ¡

            // å¦‚æœæ²¡æœ‰è§£æåˆ°ä»»ä½•å†…å®¹ï¼Œæ˜¾ç¤ºé»˜è®¤æ¶ˆæ¯
            if (announcements.length === 0) {
                announcementText.innerHTML = '<p>æ¬¢è¿ä½¿ç”¨éšæœºå›¾ç‰‡API</p>';
                return;
            }

            // æ¸…é™¤ä¹‹å‰çš„å®šæ—¶å™¨
            if (announcementInterval) {
                clearInterval(announcementInterval);
            }

            // æ˜¾ç¤ºç¬¬ä¸€æ¡å…¬å‘Š
            currentAnnouncementIndex = 0;
            announcementText.innerHTML = `<p>${announcements[currentAnnouncementIndex]}</p>`;

            // å¯åŠ¨æ»šåŠ¨å®šæ—¶å™¨ - æ¯5ç§’åˆ‡æ¢ä¸€æ¬¡
            announcementInterval = setInterval(() => {
                currentAnnouncementIndex = (currentAnnouncementIndex + 1) % announcements.length;
                announcementText.innerHTML = `<p>${announcements[currentAnnouncementIndex]}</p>`;
            }, 5000);
            } catch (error) {
                console.error('æ›´æ–°é€šçŸ¥æ æ—¶å‡ºé”™:', error);
                announcementText.innerHTML = '<p>æ¬¢è¿ä½¿ç”¨éšæœºå›¾ç‰‡API</p>';
            }
        }

        // ä» GitHub è·å–æ›´æ–°æ—¥å¿—
        async function loadGitHubReleases() {
            // åœ¨å‡½æ•°å¼€å§‹å°±è·å– changelog-content å®¹å™¨å¼•ç”¨
            const changelogContent = document.getElementById('changelog-content');
            if (!changelogContent) return;

            try {
                // åˆå§‹åŒ–GitHub URL
                initGitHubUrl();
                // è·å–GitHub URLï¼Œä¼˜å…ˆä½¿ç”¨ç¯å¢ƒå˜é‡ï¼Œå¦åˆ™ä½¿ç”¨é»˜è®¤å€¼
                const githubUrl = document.getElementById('github-footer-link')?.href || 'https://github.com/YunJian101/Random-Pictures';
                const githubRepoPath = githubUrl.replace('https://github.com/', '');
                const response = await fetch(`https://api.github.com/repos/${githubRepoPath}/releases?per_page=4`);
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                const releases = await response.json();
                console.log('GitHub releases:', releases);

                // æ›´æ–°é¡¶éƒ¨é€šçŸ¥æ  - æ˜¾ç¤ºæœ€æ–°ç‰ˆæœ¬çš„æ›´æ–°å†…å®¹
                updateAnnouncement(releases);

                // è·å–å½“å‰æœ¬åœ°ç‰ˆæœ¬å·
                const currentVersionElement = document.getElementById('current-version');
                const currentVersion = currentVersionElement ? currentVersionElement.textContent.replace('v', '') : '';

                // æ¸…ç©ºç°æœ‰å†…å®¹ï¼ˆä¿ç•™æ ‡é¢˜ï¼‰
                changelogContent.innerHTML = '<h4 class="text-2xl font-bold mb-6">æ›´æ–°æ—¥å¿—</h4>';

                // ç”Ÿæˆæ›´æ–°æ—¥å¿—HTML
                let releasesHtml = '';
                const borderColors = ['border-primary', 'border-secondary', 'border-accent', 'border-blue-400'];
                const badgeColors = ['badge-primary', 'badge-secondary', 'badge-accent', 'badge-blue'];

                releases.forEach((release, index) => {
                    const borderColor = borderColors[index] || 'border-blue-400';
                    const releaseVersion = release.tag_name || release.name || '';
                    // å»é™¤vå‰ç¼€è¿›è¡Œæ¯”è¾ƒ
                    const releaseVersionClean = releaseVersion.replace(/^v/i, '');

                    let badgeText = index === 0 ? 'æœ€æ–°' : (release.prerelease ? 'æµ‹è¯•ç‰ˆ' : 'ç¨³å®šç‰ˆ');
                    // æ ¹æ®ç‰ˆæœ¬ç±»å‹ä½¿ç”¨ç›¸åŒçš„é¢œè‰²
                    const badgeColor = badgeText === 'æœ€æ–°' ? 'badge-primary' : (badgeText === 'æµ‹è¯•ç‰ˆ' ? 'badge-accent' : 'badge-secondary');

                    // å¦‚æœç‰ˆæœ¬å·ä¸å½“å‰ç‰ˆæœ¬ä¸€è‡´ï¼Œæ·»åŠ å½“å‰ç‰ˆæœ¬æ ‡ç­¾
                    const isCurrentVersion = releaseVersionClean === currentVersion;
                    const currentVersionBadge = isCurrentVersion ? '<span class="ml-2 badge badge-success">å½“å‰ç‰ˆæœ¬</span>' : '';

                    // è§£æå‘å¸ƒæ—¥æœŸ
                    const publishDate = new Date(release.published_at).toLocaleDateString('zh-CN');

                    // æå–æ›´æ–°å†…å®¹ - æ”¯æŒå¤šç§æ ¼å¼
                    const bodyText = release.body || 'æ— æ›´æ–°è¯´æ˜';
                    console.log(`Release ${release.tag_name} body:`, bodyText);

                    let updates = '';
                    let currentCategory = '';

                    // æŒ‰æ®µè½è§£æå†…å®¹
                    const segments = bodyText.split(/\n+/);
                    for (let segment of segments) {
                        const trimmedLine = segment.trim();
                        if (!trimmedLine) continue;

                        // æ£€æµ‹æ˜¯å¦ä¸º Markdown æ ‡é¢˜ï¼ˆ### å¼€å¤´ï¼‰
                        const titleMatch = trimmedLine.match(/^#{1,3}\s+(.+)/);

                        if (titleMatch) {
                            currentCategory = titleMatch[1].trim();
                            updates += `<li class="mt-4 font-semibold text-lg text-gray-800 dark:text-gray-200">${currentCategory}</li>`;
                        } else {
                            // è§£æåˆ—è¡¨é¡¹ - æ”¯æŒä¸­è‹±æ–‡æ ‡ç‚¹
                            const listMatch = trimmedLine.match(/^[-*â€¢]\s+(.+)/);
                            const numberedMatch = trimmedLine.match(/^\d+[.)]\s*(.+)/);

                            if (listMatch) {
                                updates += `<li class="ml-6 text-sm font-normal text-gray-600 dark:text-gray-400">â€¢ ${listMatch[1].trim()}</li>`;
                            } else if (numberedMatch) {
                                updates += `<li class="ml-6 text-sm font-normal text-gray-600 dark:text-gray-400">â€¢ ${numberedMatch[1].trim()}</li>`;
                            } else if (trimmedLine.length < 200 && !trimmedLine.includes('http') && !trimmedLine.includes('##')) {
                                // çŸ­è¡Œä¸”ä¸å«é“¾æ¥å’Œæ ‡é¢˜ï¼Œä½œä¸ºæ›´æ–°é¡¹
                                updates += `<li class="ml-6 text-sm font-normal text-gray-600 dark:text-gray-400">â€¢ ${trimmedLine}</li>`;
                            }
                        }
                    }

                    // å¦‚æœæ²¡æœ‰è§£æåˆ°å†…å®¹ï¼Œæ˜¾ç¤ºé»˜è®¤æç¤º
                    if (!updates) {
                        updates = '<li class="text-sm text-gray-500">æŸ¥çœ‹å®Œæ•´æ›´æ–°å†…å®¹è¯·è®¿é—® GitHub</li>';
                    }

                    releasesHtml += `
                        <div class="border-l-4 ${borderColor} pl-4 py-2">
                            <div class="flex justify-between items-center mb-1">
                                <h5 class="text-2xl font-bold text-primary dark:text-primary">${release.tag_name || release.name} <span class="text-base font-normal text-gray-500 dark:text-gray-400">Â· ${publishDate}</span>${currentVersionBadge}</h5>
                                <span class="badge ${badgeColor}">${badgeText}</span>
                            </div>
                            <ul class="text-muted-dark dark:text-muted-light space-y-2">
                                ${updates}
                            </ul>
                        </div>
                    `;
                });

                // æ›´æ–°å†…å®¹
                changelogContent.innerHTML += releasesHtml;
            } catch (error) {
                console.error('åŠ è½½GitHub releaseså¤±è´¥:', error);
                // å³ä½¿å¤±è´¥ä¹Ÿè¦æ›´æ–°é¡¶éƒ¨é€šçŸ¥æ ï¼Œæ˜¾ç¤ºé”™è¯¯æ–‡æœ¬
                updateAnnouncement(null);
                
                // å¤±è´¥æ—¶æ˜¾ç¤ºæç¤ºä¿¡æ¯ - é‡æ–°è·å–å…ƒç´ å¼•ç”¨ç¡®ä¿å¯ç”¨
                const errorChangelogContent = document.getElementById('changelog-content');
                if (errorChangelogContent) {
                    const githubUrl = document.getElementById('github-footer-link')?.href || 'https://github.com/YunJian101/Random-Pictures';
                    // æ¸…ç©ºç°æœ‰å†…å®¹å¹¶æ˜¾ç¤ºé”™è¯¯æç¤º
                    errorChangelogContent.innerHTML = `
                        <div class="bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg p-6 text-center">
                            <div class="text-yellow-600 dark:text-yellow-400 font-medium mb-2">
                                <i class="fas fa-exclamation-triangle mr-2"></i>åŠ è½½æ›´æ–°æ—¥å¿—å¤±è´¥
                            </div>
                            <div class="text-gray-600 dark:text-gray-400 text-sm mb-3">
                                æš‚æ—¶æ— æ³•è·å–GitHub Releasesæ•°æ®
                            </div>
                            <a href="${githubUrl}/releases" target="_blank"
                               class="inline-flex items-center px-4 py-2 bg-primary text-white rounded-lg hover:bg-primary/90 transition-all duration-200">
                                <i class="fab fa-github mr-2"></i>å‰å¾€ GitHub Releases æŸ¥çœ‹
                            </a>
                        </div>
                    `;
                    
                    // ä»…åœ¨ä»æŒ‰é’®è§¦å‘æ—¶æ‰è‡ªåŠ¨æ¿€æ´»æ ‡ç­¾é¡µ
                    if (changelogErrorFromButton) {
                        const changelogTab = document.querySelector('[data-tab="changelog"]');
                        const changelogContentElement = document.getElementById('changelog-tab');
                        
                        if (changelogTab && changelogContentElement) {
                            // ç§»é™¤æ‰€æœ‰æ ‡ç­¾çš„æ¿€æ´»çŠ¶æ€
                            const docTabs = document.querySelectorAll('.doc-tab');
                            const docContents = document.querySelectorAll('.doc-content');
                            
                            docTabs.forEach(t => {
                                t.classList.remove('text-primary', 'border-b-2', 'border-primary', 'font-medium');
                                t.classList.add('text-muted-dark', 'dark:text-muted-light');
                            });
                            
                            // æ¿€æ´»æ›´æ–°æ—¥å¿—æ ‡ç­¾
                            changelogTab.classList.remove('text-muted-dark', 'dark:text-muted-light');
                            changelogTab.classList.add('text-primary', 'border-b-2', 'border-primary', 'font-medium');
                            
                            // éšè—æ‰€æœ‰å†…å®¹
                            docContents.forEach(content => {
                                content.classList.add('hidden');
                            });
                            
                            // æ˜¾ç¤ºæ›´æ–°æ—¥å¿—å†…å®¹
                            changelogContentElement.classList.remove('hidden');
                        }
                    }
                }
                changelogErrorFromButton = false; // é‡ç½®æ ‡è®°
            }
        }

        // ä»åç«¯åŠ è½½åˆ†ç±»æ•°æ®
        async function loadCategoriesFromBackend() {
            try {
                const response = await fetch(`${BASE_URL}/api/categories?page=${currentPage}`);
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                const data = await response.json();
                console.log('ä»åç«¯è·å–çš„åˆ†ç±»æ•°æ®:', data);

                // ä»æ•°æ®åº“è¯»å–çš„æ–°æ ¼å¼ï¼ˆcategory_list æ•°ç»„ï¼‰
                if (!data.category_list || data.category_list.length === 0) {
                    console.warn('åç«¯è¿”å›çš„åˆ†ç±»æ•°æ®ä¸ºç©º');
                    showNoCategoriesMessage();
                    return;
                }

                // ä¿å­˜åˆ†é¡µä¿¡æ¯åˆ°å…¨å±€å˜é‡
                totalPages = data.total_pages || 1;
                totalCategories = data.total_categories || 0;

                // ä½¿ç”¨æ–°æ ¼å¼çš„åˆ†ç±»æ•°æ®
                categoriesData = data.category_list.map(category => ({
                    name: category.name,
                    count: category.image_count || 0
                }));

                console.log('å¤„ç†åçš„åˆ†ç±»æ•°æ®:', categoriesData);
                console.log(`å½“å‰é¡µ: ${currentPage}, æ€»é¡µæ•°: ${totalPages}, æ€»åˆ†ç±»æ•°: ${totalCategories}`);

                // å¡«å……åˆ†ç±»ä¸‹æ‹‰æ¡†
                populateCategorySelect();

                // åŠ¨æ€ç”Ÿæˆåˆ†ç±»é¢„è§ˆåŒº
                generateCategoryPreview();

                // æ›´æ–°æ–‡æ¡£ä¸­çš„åˆ†ç±»åˆ—è¡¨
                updateDocCategoryList();

                // æ›´æ–°åˆ†é¡µæ§ä»¶
                updatePaginationControls();

                // æ›´æ–°æ–‡æ¡£ä¸­çš„BASE_URL
                updateDocumentUrls();

            } catch (error) {
                console.error('åŠ è½½åˆ†ç±»æ•°æ®å¤±è´¥:', error);
                showNoCategoriesMessage();
            }
        }

        // æ˜¾ç¤ºæ— åˆ†ç±»æ•°æ®æç¤º
        function showNoCategoriesMessage() {
            const categoriesGrid = document.getElementById('categories-grid');
            if (categoriesGrid) {
                categoriesGrid.innerHTML = '<div class="col-span-full text-center text-muted-dark dark:text-muted-light py-10">æš‚æ— åˆ†ç±»æ•°æ®</div>';
            }
            const categorySelect = document.getElementById('category-select');
            if (categorySelect) {
                categorySelect.innerHTML = '<option value="">æš‚æ— åˆ†ç±»</option>';
            }
            const categoryList = document.getElementById('doc-category-list');
            if (categoryList) {
                categoryList.innerHTML = '<li>æš‚æ— åˆ†ç±»</li>';
            }
        }



        // å¡«å……åˆ†ç±»ä¸‹æ‹‰æ¡†
        function populateCategorySelect() {
            const categorySelect = document.getElementById('category-select');
            if (!categorySelect) return;

            // æ¸…ç©ºç°æœ‰é€‰é¡¹
            categorySelect.innerHTML = '';

            // æ·»åŠ "å…¨éƒ¨"é€‰é¡¹ï¼ˆè°ƒç”¨å…¨å±€éšæœºå›¾APIï¼‰
            const allOption = document.createElement('option');
            allOption.value = 'all';
            allOption.textContent = 'å…¨éƒ¨';
            categorySelect.appendChild(allOption);

            // åŠ¨æ€æ·»åŠ åˆ†ç±»é€‰é¡¹
            categoriesData.forEach(category => {
                const option = document.createElement('option');
                option.value = category.name;
                option.textContent = category.name;  // ç›´æ¥ä½¿ç”¨åç«¯è¿”å›çš„åˆ†ç±»å
                categorySelect.appendChild(option);
            });
        }

        // åŠ¨æ€ç”Ÿæˆåˆ†ç±»é¢„è§ˆåŒº
        function generateCategoryPreview() {
            const categoriesGrid = document.getElementById('categories-grid');
            if (!categoriesGrid) return;

            // æ¸…ç©ºç°æœ‰å†…å®¹
            categoriesGrid.innerHTML = '';

            // åŠ¨æ€ç”Ÿæˆåˆ†ç±»å¡ç‰‡
            categoriesData.forEach(category => {
                const card = document.createElement('div');
                card.className = 'bg-card p-6 hover:translate-y-[-5px] transition-all';
                card.innerHTML = `
                    <div class="aspect-video bg-light-200 dark:bg-dark-200 rounded-xl overflow-hidden mb-5 flex items-center justify-center border border-light-300 dark:border-dark-300">
                        <img class="category-preview h-full w-full object-cover hover:scale-105 transition-transform duration-500"
                             data-src="${BASE_URL}/random?type=${encodeURIComponent(category.name)}"
                             alt="${category.name}">
                    </div>
                    <div class="flex justify-between items-center mb-2">
                        <h4 class="text-lg font-semibold">${category.name}</h4>
                        <span class="badge badge-primary">${category.count}+ å¼ </span>
                    </div>
                    <p class="text-muted-dark dark:text-muted-light text-sm mb-5"></p>
                    <div class="flex gap-3">
                        <button onclick="showCategoryImages('${encodeURIComponent(category.name)}')"
                           class="category-link btn-outline flex-1 text-center block text-sm">
                            æŸ¥çœ‹æ›´å¤š
                        </button>
                        <button class="btn-primary flex-1 text-center block text-sm">
                            <i class="fa-solid fa-star mr-1"></i>æ”¶è—åˆ†ç±»
                        </button>
                    </div>
                `;
                categoriesGrid.appendChild(card);
            });
        }

        // æ›´æ–°æ–‡æ¡£ä¸­çš„åˆ†ç±»åˆ—è¡¨
        function updateDocCategoryList() {
            const categoryList = document.getElementById('doc-category-list');
            if (!categoryList) return;

            categoryList.innerHTML = '';
            categoriesData.forEach(category => {
                const li = document.createElement('li');
                li.innerHTML = `<span class="badge badge-primary">${category.name}</span>`;
                categoryList.appendChild(li);
            });
        }

        // æ›´æ–°æ–‡æ¡£ä¸­çš„URLå ä½ç¬¦
        function updateDocumentUrls() {
            // è·å–å¯ç”¨åˆ†ç±»ï¼Œæ¯ä¸ªç¤ºä¾‹ä½¿ç”¨ä¸åŒåˆ†ç±»
            const getCategory = (index) => {
                if (!categoriesData || categoriesData.length === 0) {
                    return 'é»˜è®¤';
                }
                // ç¡®ä¿ç´¢å¼•ä¸è¶…å‡ºèŒƒå›´
                const safeIndex = Math.min(index, categoriesData.length - 1);
                return categoriesData[safeIndex].name;
            };

            const htmlCategory = getCategory(0);
            const jsCategory = getCategory(1);
            const pythonCategory = getCategory(2);
            const phpCategory = getCategory(3);

            // æ›¿æ¢æ‰€æœ‰ ${BASE_URL} ä¸ºå®é™…åœ°å€
            const elements = document.querySelectorAll('[data-replace-base-url]');
            elements.forEach(el => {
                el.textContent = el.textContent.replace(/\$\{BASE_URL\}/g, BASE_URL);
            });

            // ç‰¹æ®Šå¤„ç†æœ‰idçš„å…ƒç´ 
            const docBaseUrl = document.getElementById('doc-base-url');
            if (docBaseUrl) {
                docBaseUrl.textContent = `${BASE_URL}/random`;
            }

            const docCategoryUrl = document.getElementById('doc-category-url');
            if (docCategoryUrl) {
                docCategoryUrl.textContent = `${BASE_URL}/random?type=${getCategory(0)}`;
            }

            const docComboUrl = document.getElementById('doc-combo-url');
            if (docComboUrl) {
                docComboUrl.textContent = `${BASE_URL}/random?type=${getCategory(0)}&format=jpg`;
            }

            const docFormatUrl = document.getElementById('doc-format-url');
            if (docFormatUrl) {
                docFormatUrl.textContent = `${BASE_URL}/random?format=png`;
            }

            // åµŒå…¥ä»£ç å¼¹çª—ä¸­çš„URL
            const htmlCode = document.getElementById('html-code');
            if (htmlCode) {
                htmlCode.textContent = `<img src="${BASE_URL}/random" alt="éšæœºå›¾ç‰‡">`;
            }

            const markdownCode = document.getElementById('markdown-code');
            if (markdownCode) {
                markdownCode.textContent = `![éšæœºå›¾ç‰‡](${BASE_URL}/random)`;
            }

            const urlCode = document.getElementById('url-code');
            if (urlCode) {
                urlCode.textContent = BASE_URL + '/random';
            }

            const faqApiUsage = document.getElementById('faq-api-usage');
            if (faqApiUsage) {
                faqApiUsage.textContent = `ç›´æ¥è®¿é—® ${BASE_URL}/random å³å¯è·å–éšæœºå›¾ç‰‡ï¼Œæ”¯æŒåˆ†ç±»ç­›é€‰ã€‚`;
            }

            // æ›´æ–°ç¤ºä¾‹ä»£ç ä¸­çš„URL
            const exampleHtml = document.getElementById('example-html');
            if (exampleHtml) {
                exampleHtml.innerHTML = `&lt;!-- åŸºç¡€ä½¿ç”¨ --&gt;<br>
                                &lt;img src="${BASE_URL}/random?type=${htmlCategory}" alt="éšæœº${htmlCategory}å›¾ç‰‡"&gt;`;
            }

            const exampleJs = document.getElementById('example-js');
            if (exampleJs) {
                exampleJs.innerHTML = `// åŠ¨æ€åŠ è½½éšæœºå›¾ç‰‡<br>
                                function loadRandomImage() {<br>
                                &nbsp;&nbsp;const img = document.createElement('img');<br>
                                &nbsp;&nbsp;img.src = '${BASE_URL}/random?type=${jsCategory}';<br>
                                &nbsp;&nbsp;img.alt = 'éšæœº${jsCategory}å›¾ç‰‡';<br>
                                &nbsp;&nbsp;document.getElementById('image-container').appendChild(img);<br>
                                }<br><br>
                                // è°ƒç”¨å‡½æ•°<br>
                                loadRandomImage();`;
            }

            const examplePython = document.getElementById('example-python');
            if (examplePython) {
                examplePython.innerHTML = `import requests<br><br>
                                # è·å–éšæœº${pythonCategory}å›¾ç‰‡å¹¶ä¿å­˜<br>
                                def save_random_image():<br>
                                &nbsp;&nbsp;url = '${BASE_URL}/random?type=${pythonCategory}'<br>
                                &nbsp;&nbsp;response = requests.get(url)<br>
                                &nbsp;&nbsp;if response.status_code == 200:<br>
                                &nbsp;&nbsp;&nbsp;&nbsp;with open('random_image.jpg', 'wb') as f:<br>
                                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;f.write(response.content)<br>
                                &nbsp;&nbsp;&nbsp;&nbsp;print('å›¾ç‰‡ä¿å­˜æˆåŠŸ')<br>
                                &nbsp;&nbsp;else:<br>
                                &nbsp;&nbsp;&nbsp;&nbsp;print(f'è¯·æ±‚å¤±è´¥ï¼š{response.status_code}')<br><br>
                                save_random_image()`;
            }

            const examplePhp = document.getElementById('example-php');
            if (examplePhp) {
                examplePhp.innerHTML = `&lt;?php<br>
                                // è·å–éšæœº${phpCategory}å›¾ç‰‡URL<br>
                                $url = "${BASE_URL}/random?type=${phpCategory}";<br><br>
                                // è¾“å‡ºå›¾ç‰‡æ ‡ç­¾<br>
                                echo "&lt;img src='{$url}' alt='éšæœº${phpCategory}å›¾ç‰‡'&gt;";<br>
                                ?&gt;`;
            }
        }

        // æ›´æ–°åˆ†é¡µæ§ä»¶çŠ¶æ€
        function updatePaginationControls() {
            const prevBtn = document.getElementById('prev-page');
            const nextBtn = document.getElementById('next-page');
            const pageInfo = document.getElementById('page-info');

            if (!prevBtn || !nextBtn || !pageInfo) return;

            // æ›´æ–°é¡µç æ˜¾ç¤º
            pageInfo.textContent = `ç¬¬ ${currentPage} / ${totalPages} é¡µ`;

            // æ›´æ–°æŒ‰é’®çŠ¶æ€
            prevBtn.disabled = currentPage === 1;
            nextBtn.disabled = currentPage === totalPages;
        }

        // ä¸Šä¸€é¡µ
        function goToPrevPage() {
            if (currentPage > 1) {
                currentPage--;
                categoryImagesLoaded = false;
                loadCategoriesFromBackend().then(() => {
                    // æ»šåŠ¨åˆ°åˆ†ç±»é¢„è§ˆåŒºé¡¶éƒ¨
                    document.getElementById('categories').scrollIntoView({ behavior: 'smooth', block: 'start' });
                    loadCategoryImages();
                });
            }
        }

        // ä¸‹ä¸€é¡µ
        function goToNextPage() {
            if (currentPage < totalPages) {
                currentPage++;
                categoryImagesLoaded = false;
                loadCategoriesFromBackend().then(() => {
                    // æ»šåŠ¨åˆ°åˆ†ç±»é¢„è§ˆåŒºé¡¶éƒ¨
                    document.getElementById('categories').scrollIntoView({ behavior: 'smooth', block: 'start' });
                    loadCategoryImages();
                });
            }
        }

        // æ¨¡å—åˆ‡æ¢åŠŸèƒ½
        window.showModule = function(moduleId) {
            console.log('showModule è¢«è°ƒç”¨ï¼ŒmoduleId =', moduleId);
            // éšè—æ‰€æœ‰æ¨¡å—
            const modules = document.querySelectorAll('#hero, #demo, #docs, #categories, #stats, #feedback, #category-images');
            modules.forEach(module => {
                module.classList.add('module-hidden');
            });

            // æ˜¾ç¤ºç›®æ ‡æ¨¡å—
            const targetModule = document.getElementById(moduleId);
            console.log('æ‰¾åˆ°ç›®æ ‡æ¨¡å—:', targetModule);
            if (targetModule) {
                targetModule.classList.remove('module-hidden');
                targetModule.classList.add('animate-fade-in');

                // å¦‚æœæ˜¯ç»Ÿè®¡æ¨¡å—ï¼Œåˆå§‹åŒ–å›¾è¡¨
                if (moduleId === 'stats' && typeof categoryChart === 'undefined') {
                    initCharts();
                }

                // å¦‚æœæ˜¯æ¼”ç¤ºæ¨¡å—ï¼Œè‡ªåŠ¨åŠ è½½ç¬¬ä¸€å¼ éšæœºå›¾ç‰‡
                if (moduleId === 'demo') {
                    console.log('æ£€æµ‹åˆ°æ¼”ç¤ºæ¨¡å—ï¼Œè‡ªåŠ¨åŠ è½½éšæœºå›¾ç‰‡');
                    loadRandomImage();
                }

                // å¦‚æœæ˜¯åˆ†ç±»æ¨¡å—ï¼ŒåŠ è½½åˆ†ç±»é¢„è§ˆå›¾ç‰‡
                if (moduleId === 'categories') {
                    console.log('æ£€æµ‹åˆ°åˆ†ç±»æ¨¡å—ï¼Œå‡†å¤‡åŠ è½½å›¾ç‰‡');
                    loadCategoryImages();
                }
            }

            // ç§»åŠ¨ç«¯èœå•å…³é—­
            const mobileMenu = document.getElementById('mobile-menu');
            if (mobileMenu) {
                mobileMenu.classList.add('hidden');
            }

            // æ»šåŠ¨åˆ°é¡¶éƒ¨
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        // åˆ‡æ¢åˆ°åŸºç¡€ç”¨æ³•æ ‡ç­¾é¡µ
        function switchToBasicTab() {
            // ä½¿ç”¨ setTimeout ç¡®ä¿æ¨¡å—å·²æ˜¾ç¤ºåå†åˆ‡æ¢æ ‡ç­¾é¡µ
            setTimeout(() => {
                // æ‰¾åˆ°"åŸºç¡€ç”¨æ³•"æ ‡ç­¾æŒ‰é’®
                const basicTab = document.querySelector('.doc-tab[data-tab="basic"]');
                if (basicTab) {
                    basicTab.click();
                }
            }, 100);
        }

        // å¤„ç†æŸ¥çœ‹æ›´æ–°æ—¥å¿—æŒ‰é’®ç‚¹å‡»
        function handleChangelogClick() {
            changelogErrorFromButton = true;
            showModule('docs');
            switchToChangelogTab();
        }
        
        // åˆ‡æ¢åˆ°æ›´æ–°æ—¥å¿—æ ‡ç­¾é¡µ
        function switchToChangelogTab() {
            // ä½¿ç”¨ setTimeout ç¡®ä¿æ¨¡å—å·²æ˜¾ç¤ºåå†åˆ‡æ¢æ ‡ç­¾é¡µ
            setTimeout(() => {
                // æ‰¾åˆ°"æ›´æ–°æ—¥å¿—"æ ‡ç­¾æŒ‰é’®
                const changelogTab = document.querySelector('.doc-tab[data-tab="changelog"]');
                if (changelogTab) {
                    changelogTab.click();
                }
            }, 100);
        }

        // åŠ è½½åˆ†ç±»é¢„è§ˆå›¾ç‰‡
        let categoryImagesLoaded = false;
        function loadCategoryImages() {
            console.log('loadCategoryImages è¢«è°ƒç”¨');
            if (categoryImagesLoaded) {
                console.log('å›¾ç‰‡å·²åŠ è½½ï¼Œè·³è¿‡');
                return;
            }

            const categoryPreviews = document.querySelectorAll('.category-preview');
            console.log('æ‰¾åˆ°çš„å›¾ç‰‡å…ƒç´ æ•°é‡:', categoryPreviews.length);

            categoryPreviews.forEach((img, index) => {
                if (index < categoriesData.length) {
                    const category = categoriesData[index];
                    const src = img.dataset.src;
                    console.log(`å¤„ç†å›¾ç‰‡ ${index}:`, src);
                    img.src = src;
                    img.onerror = function() {
                        console.error('å›¾ç‰‡åŠ è½½å¤±è´¥:', src);
                        // å›¾ç‰‡åŠ è½½å¤±è´¥æ—¶æ˜¾ç¤ºå ä½ç¬¦
                        this.src = 'data:image/svg+xml,%3Csvg xmlns="http://www.w3.org/2000/svg" width="400" height="300" viewBox="0 0 400 300"%3E%3Crect width="400" height="300" fill="%23e5e7eb"/%3E%3Ctext x="50%25" y="50%25" dominant-baseline="middle" text-anchor="middle" font-family="sans-serif" font-size="16" fill="%239ca3af"%3Eå›¾ç‰‡åŠ è½½å¤±è´¥%3C/text%3E%3C/svg%3E';
                    };
                    img.onload = function() {
                        console.log('å›¾ç‰‡åŠ è½½æˆåŠŸ:', src);
                    };
                }
            });

            categoryImagesLoaded = true;
        }

        // åˆ†ç±»å›¾ç‰‡åˆ—è¡¨ç›¸å…³å˜é‡
        let currentCategoryName = '';
        let currentCategoryPage = 1;
        let totalCategoryPages = 1;
        let totalCategoryImages = 0;

        // æ˜¾ç¤ºåˆ†ç±»å›¾ç‰‡åˆ—è¡¨
        window.showCategoryImages = function(encodedCategoryName) {
            const categoryName = decodeURIComponent(encodedCategoryName);
            currentCategoryName = categoryName;
            currentCategoryPage = 1;

            console.log('æ˜¾ç¤ºåˆ†ç±»å›¾ç‰‡åˆ—è¡¨:', categoryName);

            // éšè—æ‰€æœ‰æ¨¡å—ï¼Œæ˜¾ç¤ºåˆ†ç±»å›¾ç‰‡åˆ—è¡¨æ¨¡å—
            const modules = document.querySelectorAll('#hero, #demo, #docs, #categories, #stats, #feedback');
            modules.forEach(module => {
                module.classList.add('module-hidden');
            });

            const categoryImagesModule = document.getElementById('category-images');
            if (categoryImagesModule) {
                categoryImagesModule.classList.remove('module-hidden');
                categoryImagesModule.classList.add('animate-fade-in');

                // æ›´æ–°åˆ†ç±»æ ‡é¢˜
                document.getElementById('category-title').textContent = categoryName;

                // åŠ è½½åˆ†ç±»å›¾ç‰‡
                loadCategoryImagesList();
            }

            // æ»šåŠ¨åˆ°é¡¶éƒ¨
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        // è¿”å›åˆ†ç±»åˆ—è¡¨
        window.backToCategories = function() {
            // éšè—åˆ†ç±»å›¾ç‰‡åˆ—è¡¨æ¨¡å—
            document.getElementById('category-images').classList.add('module-hidden');

            // æ˜¾ç¤ºåˆ†ç±»é¢„è§ˆæ¨¡å—
            showModule('categories');
        }

        // åŠ è½½åˆ†ç±»å›¾ç‰‡åˆ—è¡¨
        async function loadCategoryImagesList() {
            try {
                console.log(`åŠ è½½åˆ†ç±» ${currentCategoryName} çš„ç¬¬ ${currentCategoryPage} é¡µå›¾ç‰‡`);

                const response = await fetch(
                    `${BASE_URL}/api/category/images?name=${encodeURIComponent(currentCategoryName)}&page=${currentCategoryPage}`
                );

                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }

                const data = await response.json();
                console.log('åˆ†ç±»å›¾ç‰‡æ•°æ®:', data);

                // ä¿å­˜åˆ†é¡µä¿¡æ¯
                totalCategoryPages = data.total_pages || 1;
                totalCategoryImages = data.total_images || 0;

                // ç”Ÿæˆå›¾ç‰‡ç½‘æ ¼
                renderCategoryImagesGrid(data.images || []);

                // æ›´æ–°åˆ†é¡µæ§ä»¶
                updateCategoryPaginationControls();

            } catch (error) {
                console.error('åŠ è½½åˆ†ç±»å›¾ç‰‡å¤±è´¥:', error);
                const grid = document.getElementById('category-images-grid');
                if (grid) {
                    grid.innerHTML = '<div class="col-span-full text-center text-muted-dark dark:text-muted-light py-10">åŠ è½½å›¾ç‰‡å¤±è´¥</div>';
                }
            }
        }

        // æ¸²æŸ“åˆ†ç±»å›¾ç‰‡ç½‘æ ¼
        function renderCategoryImagesGrid(images) {
            const grid = document.getElementById('category-images-grid');
            if (!grid) return;

            if (!images || images.length === 0) {
                grid.innerHTML = '<div class="col-span-full text-center text-muted-dark dark:text-muted-light py-10">æš‚æ— å›¾ç‰‡</div>';
                return;
            }

            grid.innerHTML = '';

            images.forEach(image => {
                const imageUrl = `${BASE_URL}${image.url}`;
                const card = document.createElement('div');
                card.className = 'bg-card p-4 hover:translate-y-[-5px] transition-all';
                card.innerHTML = `
                    <div class="aspect-video bg-light-200 dark:bg-dark-200 rounded-xl overflow-hidden mb-3 border border-light-300 dark:border-dark-300">
                        <img class="w-full h-full object-cover hover:scale-105 transition-transform duration-500"
                             src="${imageUrl}"
                             alt="${currentCategoryName}"
                             loading="lazy">
                    </div>
                    <p class="text-muted-dark dark:text-muted-light text-sm mb-3 truncate">${image.name}</p>
                    <div class="flex gap-2">
                        <a href="${imageUrl}" target="_blank" class="btn-outline flex-1 text-center text-sm py-2">
                            <i class="fa-solid fa-external-link-alt mr-1"></i>æŸ¥çœ‹
                        </a>
                        <button onclick="downloadImage('${imageUrl}', '${image.name}')" class="btn-primary flex-1 text-center text-sm py-2">
                            <i class="fa-solid fa-download mr-1"></i>ä¸‹è½½
                        </button>
                    </div>
                `;
                grid.appendChild(card);
            });
        }
        
        // ä¸‹è½½å›¾ç‰‡
        async function downloadImage(url, filename) {
            try {
                const response = await fetch(url);
                const blob = await response.blob();
                const link = document.createElement('a');
                link.href = URL.createObjectURL(blob);
                link.download = filename;
                document.body.appendChild(link);
                link.click();
                document.body.removeChild(link);
                URL.revokeObjectURL(link.href);
            } catch (error) {
                console.error('ä¸‹è½½å›¾ç‰‡å¤±è´¥:', error);
                // æ˜¾ç¤ºé”™è¯¯å¼¹çª—
                const modal = document.getElementById('success-modal');
                const modalContent = document.getElementById('modal-content');
                const modalTitle = document.getElementById('modal-title');
                const modalMessage = document.getElementById('modal-message');
                const modalClose = document.getElementById('modal-close');
                
                // ä¿®æ”¹å¼¹çª—æ ·å¼ä¸ºé”™è¯¯æ ·å¼
                modalContent.querySelector('.fa-check').className = 'fa-solid fa-times text-red-500 dark:text-red-400 text-2xl';
                modalContent.querySelector('.bg-green-100').className = 'w-16 h-16 rounded-full bg-red-100 dark:bg-red-900 flex items-center justify-center';
                modalClose.className = 'bg-red-500 hover:bg-red-600 text-white px-6 py-2 rounded-lg font-medium hover:shadow-lg transition-all';
                
                modalTitle.textContent = 'ä¸‹è½½å¤±è´¥';
                modalMessage.textContent = 'ä¸‹è½½å›¾ç‰‡å¤±è´¥ï¼Œè¯·é‡è¯•';
                
                modal.classList.remove('hidden');
                setTimeout(() => {
                    modalContent.classList.remove('scale-95', 'opacity-0');
                    modalContent.classList.add('scale-100', 'opacity-100');
                }, 10);
                
                // å…³é—­å¼¹çª—äº‹ä»¶
                modalClose.onclick = () => {
                    modalContent.classList.remove('scale-100', 'opacity-100');
                    modalContent.classList.add('scale-95', 'opacity-0');
                    setTimeout(() => {
                        modal.classList.add('hidden');
                        // æ¢å¤å¼¹çª—æ ·å¼
                        modalContent.querySelector('.fa-times').className = 'fa-solid fa-check text-green-500 dark:text-green-400 text-2xl';
                        modalContent.querySelector('.bg-red-100').className = 'w-16 h-16 rounded-full bg-green-100 dark:bg-green-900 flex items-center justify-center';
                        modalClose.className = 'btn-gradient light text-white px-6 py-2 rounded-lg font-medium hover:shadow-lg transition-all';
                    }, 300);
                };
            }
        }


        // æ›´æ–°åˆ†ç±»å›¾ç‰‡åˆ—è¡¨çš„åˆ†é¡µæ§ä»¶
        function updateCategoryPaginationControls() {
            const prevBtn = document.getElementById('category-images-prev');
            const nextBtn = document.getElementById('category-images-next');
            const pageInfo = document.getElementById('category-images-page-info');

            if (pageInfo) {
                pageInfo.textContent = `ç¬¬ ${currentCategoryPage} / ${totalCategoryPages} é¡µ (å…± ${totalCategoryImages} å¼ )`;
            }

            if (prevBtn) {
                prevBtn.disabled = currentCategoryPage === 1;
                prevBtn.onclick = () => goToCategoryPrevPage();
            }

            if (nextBtn) {
                nextBtn.disabled = currentCategoryPage === totalCategoryPages;
                nextBtn.onclick = () => goToCategoryNextPage();
            }
        }

        // åˆ†ç±»å›¾ç‰‡åˆ—è¡¨ä¸Šä¸€é¡µ
        function goToCategoryPrevPage() {
            if (currentCategoryPage > 1) {
                currentCategoryPage--;
                loadCategoryImagesList().then(() => {
                    // æ»šåŠ¨åˆ°åˆ†ç±»å›¾ç‰‡åˆ—è¡¨åŒºåŸŸé¡¶éƒ¨
                    document.getElementById('category-images').scrollIntoView({ behavior: 'smooth', block: 'start' });
                });
            }
        }

        // åˆ†ç±»å›¾ç‰‡åˆ—è¡¨ä¸‹ä¸€é¡µ
        function goToCategoryNextPage() {
            if (currentCategoryPage < totalCategoryPages) {
                currentCategoryPage++;
                loadCategoryImagesList().then(() => {
                    // æ»šåŠ¨åˆ°åˆ†ç±»å›¾ç‰‡åˆ—è¡¨åŒºåŸŸé¡¶éƒ¨
                    document.getElementById('category-images').scrollIntoView({ behavior: 'smooth', block: 'start' });
                });
            }
        }

        // ä¸»é¢˜åˆ‡æ¢åŠŸèƒ½
        const themeToggle = document.getElementById('theme-toggle');
        const html = document.documentElement;

        if (localStorage.getItem('theme') === 'dark') {
            html.classList.remove('light');
            html.classList.add('dark');
        }

        themeToggle?.addEventListener('click', () => {
            if (html.classList.contains('dark')) {
                html.classList.remove('dark');
                html.classList.add('light');
                localStorage.setItem('theme', 'light');
            } else {
                html.classList.remove('light');
                html.classList.add('dark');
                localStorage.setItem('theme', 'dark');
            }
        });

        // è¯­è¨€åˆ‡æ¢åŠŸèƒ½
        const langToggle = document.getElementById('lang-toggle');
        const langDropdown = document.getElementById('lang-dropdown');
        const langOptions = document.querySelectorAll('.lang-option');

        langToggle?.addEventListener('click', (e) => {
            e.stopPropagation();
            langDropdown.classList.toggle('hidden');
        });

        document.addEventListener('click', () => {
            langDropdown?.classList.add('hidden');
        });

        langOptions.forEach(option => {
            option.addEventListener('click', () => {
                const lang = option.dataset.lang;
                console.log('åˆ‡æ¢è¯­è¨€:', lang);
                // è¿™é‡Œå¯ä»¥æ·»åŠ å®é™…çš„è¯­è¨€åˆ‡æ¢é€»è¾‘
            });
        });

        // ç§»åŠ¨ç«¯èœå•åˆ‡æ¢
        const mobileMenuBtn = document.getElementById('mobile-menu-btn');
        const mobileMenu = document.getElementById('mobile-menu');

        mobileMenuBtn?.addEventListener('click', () => {
            mobileMenu.classList.toggle('hidden');
        });

        // æ¼”ç¤ºåŒºåŠŸèƒ½
        const refreshBtn = document.getElementById('refresh-btn');
        const randomImage = document.getElementById('random-image');
        const loading = document.getElementById('loading');
        const error = document.getElementById('error');
        const apiUrl = document.getElementById('api-url');
        const categorySelect = document.getElementById('category-select');
        const formatSelect = document.getElementById('format-select');
        const sizeSelect = document.getElementById('size-select');

        // è·Ÿè¸ªå½“å‰ blob URLï¼Œç”¨äºé‡Šæ”¾
        let currentObjectUrl = null;

        refreshBtn?.addEventListener('click', loadRandomImage);

        async function loadRandomImage() {
            const category = categorySelect.value;
            const format = formatSelect.value;
            const size = sizeSelect.value;

            // æ„å»ºAPI URL - ä½¿ç”¨åŠ¨æ€BASE_URL
            let url = BASE_URL + '/random';
            const params = new URLSearchParams();

            // å¦‚æœé€‰æ‹©äº†å…·ä½“åˆ†ç±»ï¼ˆä¸æ˜¯"å…¨éƒ¨"ï¼‰ï¼Œåˆ™æ·»åŠ typeå‚æ•°
            if (category && category !== 'all') {
                params.append('type', category);
            }
            if (format) params.append('format', format);
            if (size) params.append('size', size);

            if (params.toString()) {
                url += '?' + params.toString();
            }

            // æ›´æ–°API URLæ˜¾ç¤º
            if (apiUrl) {
                apiUrl.value = url;
            }

            // æ˜¾ç¤ºåŠ è½½çŠ¶æ€
            if (loading) loading.classList.remove('hidden');
            if (randomImage) randomImage.classList.add('hidden');
            if (error) error.classList.add('hidden');

            try {
                // ä½¿ç”¨fetch APIè·å–å›¾ç‰‡ï¼Œç¦ç”¨ç¼“å­˜ - ä¸ä½¿ç”¨æ—¶é—´æˆ³
                const response = await fetch(url, {
                    method: 'GET',
                    cache: 'no-store', // æœ€ä¸¥æ ¼çš„ç¼“å­˜ç¦ç”¨
                    headers: {
                        'Cache-Control': 'no-cache, no-store, must-revalidate',
                        'Pragma': 'no-cache',
                        'Expires': '0'
                    }
                });

                if (!response.ok) {
                    throw new Error(`HTTP ${response.status}: ${response.statusText}`);
                }

                // å°†å“åº”è½¬æ¢ä¸ºblob
                const blob = await response.blob();
                
                // é‡Šæ”¾ä¹‹å‰çš„object URL
                if (currentObjectUrl) {
                    URL.revokeObjectURL(currentObjectUrl);
                }
                
                // åˆ›å»ºæ–°çš„object URL
                currentObjectUrl = URL.createObjectURL(blob);
                
                // è®¾ç½®å›¾ç‰‡æº
                if (randomImage) {
                    randomImage.src = currentObjectUrl;
                    randomImage.classList.remove('hidden');
                    randomImage.onload = () => {
                        if (loading) loading.classList.add('hidden');
                        updateImageInfo();
                    };
                    randomImage.onerror = () => {
                        if (loading) loading.classList.add('hidden');
                        if (error) {
                            error.classList.remove('hidden');
                        }
                    };
                }
            } catch (err) {
                console.error('åŠ è½½å›¾ç‰‡å¤±è´¥:', err);
                if (loading) loading.classList.add('hidden');
                if (error) {
                    document.getElementById('error-message').textContent = `åŠ è½½å¤±è´¥: ${err.message}`;
                    error.classList.remove('hidden');
                }
            }
        }

        function updateImageInfo() {
            const info = document.getElementById('image-info');
            if (info && randomImage) {
                info.textContent = `å°ºå¯¸: ${randomImage.naturalWidth}x${randomImage.naturalHeight}`;
            }
        }

        // åˆ†é¡µæŒ‰é’®äº‹ä»¶ç»‘å®š
        document.getElementById('prev-page')?.addEventListener('click', goToPrevPage);
        document.getElementById('next-page')?.addEventListener('click', goToNextPage);

        // åˆå§‹åŒ–æ–‡æ¡£URL
        updateDocPageUrls();

        // å¤åˆ¶æŒ‰é’®åŠŸèƒ½
        const copyBtn = document.getElementById('copy-btn');
        copyBtn?.addEventListener('click', async () => {
            if (apiUrl) {
                try {
                    await navigator.clipboard.writeText(apiUrl.value);
                    copyBtn.innerHTML = '<i class="fa-solid fa-check text-green-500 text-lg"></i>';
                    setTimeout(() => {
                        copyBtn.innerHTML = '<i class="fa-solid fa-copy text-lg"></i>';
                    }, 2000);
                } catch (err) {
                    console.error('å¤åˆ¶å¤±è´¥:', err);
                }
            }
        });

        // åµŒå…¥ä»£ç å¼¹çª—
        const embedBtn = document.getElementById('embed-btn');
        const embedModal = document.getElementById('embed-modal');
        const closeEmbedModal = document.getElementById('close-embed-modal');
        const copyEmbedCode = document.getElementById('copy-embed-code');
        const htmlCode = document.getElementById('html-code');
        const markdownCode = document.getElementById('markdown-code');
        const urlCode = document.getElementById('url-code');

        embedBtn?.addEventListener('click', () => {
            if (apiUrl && htmlCode && markdownCode && urlCode) {
                htmlCode.textContent = `<img src="${apiUrl.value}" alt="éšæœºå›¾ç‰‡">`;
                markdownCode.textContent = `![éšæœºå›¾ç‰‡](${apiUrl.value})`;
                urlCode.textContent = apiUrl.value;
                embedModal.classList.remove('hidden');
            }
        });

        closeEmbedModal?.addEventListener('click', () => {
            embedModal.classList.add('hidden');
        });

        embedModal?.addEventListener('click', (e) => {
            if (e.target === embedModal) {
                embedModal.classList.add('hidden');
            }
        });

        // ä»£ç å¤åˆ¶åŠŸèƒ½
        copyEmbedCode?.addEventListener('click', async () => {
            if (htmlCode) {
                try {
                    await navigator.clipboard.writeText(htmlCode.textContent);
                    copyEmbedCode.innerHTML = '<i class="fa-solid fa-check text-green-500 text-lg"></i>';
                    setTimeout(() => {
                        copyEmbedCode.innerHTML = '<i class="fa-solid fa-copy text-lg"></i>';
                    }, 2000);
                } catch (err) {
                    console.error('å¤åˆ¶å¤±è´¥:', err);
                }
            }
        });

        // åˆ†é¡µåŠŸèƒ½

        function goToPrevPage() {
            if (currentPage > 1) {
                currentPage--;
                loadRandomImage();
            }
        }

        function goToNextPage() {
            currentPage++;
            loadRandomImage();
        }

        function updateDocPageUrls() {
            const docUrls = document.querySelectorAll('.doc-url');
            docUrls.forEach(url => {
                url.href = url.href.replace('{page}', currentPage);
            });
        }

        copyEmbedCode?.addEventListener('click', async () => {
            const code = `HTML:\n${htmlCode.textContent}\n\nMarkdown:\n${markdownCode.textContent}\n\nURL:\n${urlCode.textContent}`;
            try {
                setTimeout(() => {
                    copyEmbedCode.innerHTML = '<i class="fa-solid fa-copy mr-2"></i>å¤åˆ¶å…¨éƒ¨ä»£ç ';
                }, 2000);
            } catch (err) {
                console.error('å¤åˆ¶å¤±è´¥:', err);
            }
        });

        // æ–°çª—å£æ‰“å¼€æŒ‰é’®
        const openBtn = document.getElementById('open-btn');
        openBtn?.addEventListener('click', () => {
            if (apiUrl) {
                window.open(apiUrl.value, '_blank');
            }
        });

        // æ–‡æ¡£æ ‡ç­¾é¡µåˆ‡æ¢
        const docTabs = document.querySelectorAll('.doc-tab');
        const docContents = document.querySelectorAll('.doc-content');

        docTabs.forEach(tab => {
            tab.addEventListener('click', () => {
                const tabName = tab.dataset.tab;

                // ç§»é™¤æ‰€æœ‰æ ‡ç­¾çš„æ¿€æ´»çŠ¶æ€
                docTabs.forEach(t => {
                    t.classList.remove('text-primary', 'border-b-2', 'border-primary', 'font-medium');
                    t.classList.add('text-muted-dark', 'dark:text-muted-light');
                });

                // æ¿€æ´»å½“å‰æ ‡ç­¾
                tab.classList.remove('text-muted-dark', 'dark:text-muted-light');
                tab.classList.add('text-primary', 'border-b-2', 'border-primary', 'font-medium');

                // éšè—æ‰€æœ‰å†…å®¹
                docContents.forEach(content => {
                    content.classList.add('hidden');
                });

                // æ˜¾ç¤ºå¯¹åº”å†…å®¹
                const targetContent = document.getElementById(tabName + '-tab');
                if (targetContent) {
                    targetContent.classList.remove('hidden');
                }

                // å¦‚æœåˆ‡æ¢åˆ°åŸºç¡€ç”¨æ³•æ ‡ç­¾ï¼Œæ›´æ–°åˆ†ç±»åˆ—è¡¨
                if (tabName === 'basic') {
                    updateDocCategoryList();
                }
                
                // å¦‚æœåˆ‡æ¢åˆ°æ›´æ–°æ—¥å¿—æ ‡ç­¾ï¼Œæ£€æŸ¥æ˜¯å¦éœ€è¦é‡æ–°åŠ è½½
                if (tabName === 'changelog') {
                    const changelogContent = document.getElementById('changelog-content');
                    // æ£€æŸ¥æ˜¯å¦åªæœ‰æ ‡é¢˜æ²¡æœ‰å®é™…å†…å®¹ï¼ˆæ ‡é¢˜æ˜¯ä¸€ä¸ªh4å…ƒç´ ï¼‰
                    if (changelogContent && changelogContent.children.length <= 1) {
                        loadGitHubReleases();
                    }
                }
            });
        });

        // å›¾è¡¨åˆå§‹åŒ–
        let categoryChart = null;
        let trendChart = null;

        function initCharts() {
            // åˆ†ç±»è®¿é—®ç»Ÿè®¡å›¾è¡¨
            const categoryCtx = document.getElementById('categoryChart');
            if (categoryCtx) {
                categoryChart = new Chart(categoryCtx, {
                    type: 'doughnut',
                    data: {
                        labels: ['è‡ªç„¶é£å…‰', 'åŸå¸‚å»ºç­‘', 'åŠ¨ç‰©èŒå® ', 'è‰ºæœ¯åˆ›æ„', 'ç§‘æŠ€äº§å“', 'ç¾é£Ÿé¥®å“', 'æ—…è¡Œé£æ™¯'],
                        datasets: [{
                            data: [856, 724, 912, 688, 542, 786, 654],
                            backgroundColor: [
                                '#10b981',
                                '#6366f1',
                                '#f59e0b',
                                '#ec4899',
                                '#06b6d4',
                                '#84cc16',
                                '#f97316'
                            ]
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: {
                                position: 'right'
                            }
                        }
                    }
                });
            }

            // æœˆåº¦è®¿é—®è¶‹åŠ¿å›¾è¡¨
            const trendCtx = document.getElementById('trendChart');
            if (trendCtx) {
                trendChart = new Chart(trendCtx, {
                    type: 'line',
                    data: {
                        labels: ['7æœˆ', '8æœˆ', '9æœˆ', '10æœˆ', '11æœˆ', '12æœˆ', '1æœˆ'],
                        datasets: [{
                            label: 'è®¿é—®æ¬¡æ•°',
                            data: [1200000, 1350000, 1520000, 1680000, 1850000, 2100000, 2350000],
                            borderColor: '#6366f1',
                            backgroundColor: 'rgba(99, 102, 241, 0.1)',
                            fill: true,
                            tension: 0.4
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: {
                                display: false
                            }
                        },
                        scales: {
                            y: {
                                beginAtZero: true,
                                ticks: {
                                    callback: function(value) {
                                        return value / 10000 + 'ä¸‡';
                                    }
                                }
                            }
                        }
                    }
                });
            }
        }

        // åé¦ˆè¡¨å•æäº¤
        const feedbackForm = document.getElementById('feedback-form');
        feedbackForm?.addEventListener('submit', (e) => {
            e.preventDefault();
            // æ˜¾ç¤ºæˆåŠŸå¼¹çª—
            const modal = document.getElementById('success-modal');
            const modalContent = document.getElementById('modal-content');
            const modalTitle = document.getElementById('modal-title');
            const modalMessage = document.getElementById('modal-message');
            const modalClose = document.getElementById('modal-close');
            
            modalTitle.textContent = 'åé¦ˆæˆåŠŸ';
            modalMessage.textContent = 'æ„Ÿè°¢æ‚¨çš„åé¦ˆï¼æˆ‘ä»¬ä¼šå°½å¿«å¤„ç†ã€‚';
            
            modal.classList.remove('hidden');
            setTimeout(() => {
                modalContent.classList.remove('scale-95', 'opacity-0');
                modalContent.classList.add('scale-100', 'opacity-100');
            }, 10);
            
            // å…³é—­å¼¹çª—äº‹ä»¶
            modalClose.onclick = () => {
                modalContent.classList.remove('scale-100', 'opacity-100');
                modalContent.classList.add('scale-95', 'opacity-0');
                setTimeout(() => {
                    modal.classList.add('hidden');
                    feedbackForm.reset();
                }, 300);
            };
        });
        
        // è‡ªå®šä¹‰å¼¹çª—å…³é—­äº‹ä»¶
        document.getElementById('modal-close')?.addEventListener('click', function() {
            const modal = document.getElementById('success-modal');
            const modalContent = document.getElementById('modal-content');
            
            if (modal && modalContent) {
                modalContent.classList.remove('scale-100', 'opacity-100');
                modalContent.classList.add('scale-95', 'opacity-0');
                setTimeout(() => {
                    modal.classList.add('hidden');
                    // æ¢å¤å¼¹çª—æ ·å¼
                    const iconElement = modalContent.querySelector('.fa-times') || modalContent.querySelector('.fa-check');
                    const bgElement = modalContent.querySelector('.bg-red-100') || modalContent.querySelector('.bg-green-100');
                    const closeButton = document.getElementById('modal-close');
                    
                    if (iconElement) {
                        iconElement.className = 'fa-solid fa-check text-green-500 dark:text-green-400 text-2xl';
                    }
                    if (bgElement) {
                        bgElement.className = 'w-16 h-16 rounded-full bg-green-100 dark:bg-green-900 flex items-center justify-center';
                    }
                    if (closeButton) {
                        closeButton.className = 'btn-gradient light text-white px-6 py-2 rounded-lg font-medium hover:shadow-lg transition-all';
                    }
                }, 300);
            }
        });
    </script>
    
    <!-- è‡ªå®šä¹‰å¼¹çª— -->
    <div id="success-modal" class="fixed inset-0 flex items-center justify-center z-50 hidden">
        <div class="absolute inset-0 bg-black/50 backdrop-blur-sm" id="modal-backdrop"></div>
        <div class="relative bg-white dark:bg-gray-800 rounded-2xl p-6 max-w-md w-full mx-4 shadow-2xl transform transition-all duration-300 scale-95 opacity-0" id="modal-content">
            <!-- å¼¹çª—å›¾æ ‡ -->
            <div class="flex justify-center mb-4">
                <div class="w-16 h-16 rounded-full bg-green-100 dark:bg-green-900 flex items-center justify-center">
                    <i class="fa-solid fa-check text-green-500 dark:text-green-400 text-2xl"></i>
                </div>
            </div>
            <!-- å¼¹çª—æ ‡é¢˜ -->
            <h3 class="text-xl font-bold text-center light:text-gray-800 dark:text-gray-200 mb-2" id="modal-title">æ“ä½œæˆåŠŸ</h3>
            <!-- å¼¹çª—å†…å®¹ -->
            <p class="text-center light:text-gray-600 dark:text-gray-400 mb-6" id="modal-message">æ“ä½œå·²æˆåŠŸå®Œæˆ</p>
            <!-- å¼¹çª—æŒ‰é’® -->
            <div class="flex justify-center">
                <button id="modal-close" class="btn-gradient light text-white px-6 py-2 rounded-lg font-medium hover:shadow-lg transition-all">
                    ç¡®å®š
                </button>
            </div>
        </div>
    </div>
</body>
</html>